(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9153],{61464:function(e,s,t){Promise.resolve().then(t.bind(t,44268))},44268:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(57437),n=t(2265);function r(){let[e,s]=(0,n.useState)(null),[t,r]=(0,n.useState)(""),[l,c]=(0,n.useState)(null),[i,d]=(0,n.useState)("json"),[o,m]=(0,n.useState)("all");(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/research/analytics?timeRange=".concat(o));if(e.ok){let t=await e.json();s(t)}}catch(e){}})()},[o]);let x=async e=>{r(e);try{let s=await fetch("/api/admin/research/quiz/".concat(encodeURIComponent(e),"/insights?timeRange=").concat(o));if(s.ok){let e=await s.json();c(e)}}catch(e){}},h=async()=>{try{let e=await fetch("/api/admin/research/export?format=".concat(i,"&timeRange=").concat(o));if(!e.ok)return;let s=await e.blob(),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="research-data-".concat(new Date().toISOString().split("T")[0],".").concat(i),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)}catch(e){}},u=async e=>{if(t)try{let s=await fetch("/api/admin/research/quiz/".concat(encodeURIComponent(t),"/export?format=").concat(e,"&timeRange=").concat(o));if(!s.ok)return;let a=await s.blob(),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download="".concat(t,"-research-").concat(new Date().toISOString().split("T")[0],".").concat(e),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(e){}},p=async()=>{if(t)try{let e=await fetch("/api/admin/research/quiz/".concat(encodeURIComponent(t),"/report?timeRange=").concat(o));if(!e.ok)return;let s=await e.blob(),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download="".concat(t,"-research-report-").concat(new Date().toISOString().split("T")[0],".md"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}catch(e){}};return((0,n.useEffect)(()=>{t&&(async()=>{try{let e=await fetch("/api/admin/research/quiz/".concat(encodeURIComponent(t),"/insights?timeRange=").concat(o));e.ok&&c(await e.json())}catch(e){}})()},[o]),e)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Research Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Anonymous data analysis for quiz improvement"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm","aria-label":"Time range",children:[(0,a.jsx)("option",{value:"24h",children:"Last 24h"}),(0,a.jsx)("option",{value:"7d",children:"Last 7d"}),(0,a.jsx)("option",{value:"30d",children:"Last 30d"}),(0,a.jsx)("option",{value:"90d",children:"Last 90d"}),(0,a.jsx)("option",{value:"all",children:"All time"})]}),(0,a.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"json",children:"JSON"}),(0,a.jsx)("option",{value:"csv",children:"CSV"})]}),(0,a.jsx)("button",{onClick:h,className:"px-4 py-2 bg-brand-600 text-white rounded-md hover:bg-brand-700 text-sm",children:"Export Data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-blue-600 text-sm",children:"\uD83D\uDCCA"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Responses"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalResponses})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 text-sm",children:"\uD83E\uDDE0"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Quizzes"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:Object.keys(e.quizBreakdown).length})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-purple-600 text-sm",children:"⏰"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Peak Hours"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[e.timeAnalytics.peakUsageHours.slice(0,2).join(", "),"h"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-orange-600 text-sm",children:"\uD83D\uDCC8"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Questions Analyzed"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.responsePatterns.length})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Response Distribution"}),(0,a.jsx)("div",{className:"space-y-3",children:Object.entries(e.quizBreakdown).map(s=>{let[n,r]=s;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>x(n),className:"text-brand-600 hover:text-brand-700 font-medium text-sm",children:n.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),t===n&&(0,a.jsx)("span",{className:"text-xs bg-brand-100 text-brand-700 px-2 py-1 rounded",children:"Selected"}),(0,a.jsx)("a",{href:"/quizzes/".concat(n),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View"}),(0,a.jsx)("a",{href:"/admin/quizzes?slug=".concat(encodeURIComponent(n)),className:"text-xs text-gray-700 hover:underline",children:"Edit"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[r," responses"]}),(0,a.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-brand-600 h-2 rounded-full",style:{width:"".concat(r/e.totalResponses*100,"%")}})})]})]},n)})})]}),l&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-3",children:[(0,a.jsxs)("span",{children:["Insights: ",t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())]}),(0,a.jsx)("a",{href:"/quizzes/".concat(t),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View page"}),(0,a.jsx)("a",{href:"/admin/quizzes?slug=".concat(encodeURIComponent(t)),className:"text-xs text-gray-700 hover:underline",children:"Edit in Admin"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Time Range:"}),(0,a.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,a.jsx)("option",{value:"24h",children:"Last 24h"}),(0,a.jsx)("option",{value:"7d",children:"Last 7d"}),(0,a.jsx)("option",{value:"30d",children:"Last 30d"}),(0,a.jsx)("option",{value:"90d",children:"Last 90d"}),(0,a.jsx)("option",{value:"all",children:"All time"})]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>u("json"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm",children:"Export Selected (JSON)"}),(0,a.jsx)("button",{onClick:()=>u("csv"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm",children:"Export Selected (CSV)"}),(0,a.jsx)("button",{onClick:p,className:"px-3 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-md text-sm",children:"Download Report (.md)"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Performance Metrics"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Completions:"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:l.totalCompletions})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Average Score:"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:l.averageScore.toFixed(1)})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Score Distribution"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(l.scoreDistribution).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[s,":"]}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t})]},s)})})]})]}),l.commonResponsePatterns.length>0&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Patterns"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:l.commonResponsePatterns.map((e,s)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},s))})]}),l.improvementSuggestions.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Improvement Suggestions"}),(0,a.jsx)("ul",{className:"space-y-2",children:l.improvementSuggestions.map((e,s)=>(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"text-yellow-500 mt-0.5",children:"\uD83D\uDCA1"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:e})]},s))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Question Analysis"}),(0,a.jsx)("div",{className:"space-y-4",children:e.responsePatterns.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"border-l-4 border-brand-200 pl-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 text-sm mb-2",children:e.questionText}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[e.averageScore&&(0,a.jsxs)("span",{children:["Avg Score: ",e.averageScore.toFixed(1)]}),(0,a.jsxs)("span",{children:["Responses: ",Object.values(e.responseDistribution).reduce((e,s)=>e+s,0)]}),e.commonPatterns.length>0&&(0,a.jsxs)("span",{children:["Patterns: ",e.commonPatterns.join(", ")]})]})]},s))})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-blue-500 mt-0.5",children:"\uD83D\uDD12"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900",children:"Privacy & Research Ethics"}),(0,a.jsx)("p",{className:"text-sm text-blue-800 mt-1",children:"All data collected is completely anonymous. No personal information, email addresses, or identifying details are stored. This research data helps improve quiz quality and provides insights into behavioral patterns for academic research purposes."})]})]})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,a.jsx)("div",{className:"text-gray-500",children:"Loading research data..."})})}function l(){return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)(r,{})})})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=61464)}),_N_E=e.O()}]);