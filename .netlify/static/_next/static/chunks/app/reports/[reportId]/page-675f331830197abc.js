(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4882],{83122:function(e,t,n){Promise.resolve().then(n.bind(n,44019))},44019:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(57437),l=n(2265),s=n(99376),a=n(27648),i=n(84226),o=n(30087),u=n(55775),d=n.n(u),c=n(175),m=n(99178),f=n(93772);function p(){let[e,t]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),[h,x]=(0,l.useState)(!1),b=(0,s.useParams)(),v=(0,s.useSearchParams)(),y=(0,s.useRouter)(),j=(null==b?void 0:b.reportId)||"",g=null==v?void 0:v.get("score"),w=null==v?void 0:v.get("maxScore");null==v||v.get("quizId");let N=Number(null!=g?g:72),S=Number(null!=w?w:100),P=(0,c.D9)(j),_=(0,c.tF)(N,S),R=(0,l.useMemo)(()=>((null==P?void 0:P.questions)||[]).map((e,t)=>{var n;return{questionId:null!==(n=e.id)&&void 0!==n?n:String(t+1),questionText:e.text,answer:"—",questionType:"text"}}),[P]),I=(0,l.useMemo)(()=>{try{var e,t;return(null===(t=crypto)||void 0===t?void 0:null===(e=t.randomUUID)||void 0===e?void 0:e.call(t))||Math.random().toString(36).slice(2)}catch(e){return Math.random().toString(36).slice(2)}},[]),O="/chat/".concat(I,"?quizId=").concat(encodeURIComponent(j),"&band=").concat(encodeURIComponent(_.label),"&score=").concat(encodeURIComponent(String(N)),"&maxScore=").concat(encodeURIComponent(String(S))),k=d()(()=>Promise.all([n.e(5520),n.e(7611),n.e(2441)]).then(n.bind(n,97611)).then(e=>e.QuizReportVisualization),{loadableGenerated:{webpack:()=>[97611]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"h-64 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg animate-pulse"})}),q="http://localhost:3000",C="".concat(q,"/reports/").concat(j),z={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"".concat(q,"/")},{"@type":"ListItem",position:2,name:"Reports",item:"".concat(q,"/reports")},{"@type":"ListItem",position:3,name:(null==P?void 0:P.title)||"Assessment Report",item:C}]};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-purple-50",children:[(0,r.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(z)}}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,r.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,r.jsx)(a.default,{href:"/reports",className:"inline-flex items-center text-sm text-purple-700 hover:text-purple-800",children:"← Back to reports"})}),(0,r.jsxs)(m.Zb,{className:"mb-8",children:[(0,r.jsx)(m.Ol,{children:(0,r.jsx)(m.ll,{className:"text-2xl",children:(null==P?void 0:P.title)||"Assessment Report"})}),(0,r.jsx)(m.aY,{children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Summary:"})," ",_.label]}),(0,r.jsxs)("div",{className:"hidden md:block text-gray-600",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Brief insight:"})," ",_.advice]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Quiz:"})," ",(null==P?void 0:P.slug)||j]}),(0,r.jsxs)("div",{className:"ml-auto flex flex-col gap-3 items-end",children:[(0,r.jsx)(o.default,{href:O,surface:"report_detail",eventName:"report_chat_start",variant:"uiverse",className:"whitespace-nowrap",children:"Ask AI about this report"}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(o.default,{surface:"report_detail",eventName:"email_detailed_report_click",variant:"outline",className:"whitespace-nowrap",onClick:()=>t(e=>!e),children:"Email detailed report"})}),e&&(0,r.jsxs)("form",{className:"flex flex-col sm:flex-row gap-3 w-full",onSubmit:async e=>{if(e.preventDefault(),!u||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)){f.A.error("Please enter a valid email");return}try{x(!0);let e=await fetch("/api/quiz/email-results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,quizId:j,quizTitle:(null==P?void 0:P.title)||j,score:N,maxScore:S,band:_.label})});if(e.ok)f.A.success("Detailed report will arrive by email shortly."),t(!1),p("");else{let t=await e.json().catch(()=>({}));f.A.error(t.error||"Failed to queue email")}}catch(e){f.A.error("Network error. Please try again.")}finally{x(!1)}},children:[(0,r.jsx)("input",{type:"email",inputMode:"email",placeholder:"Enter your email",value:u,onChange:e=>p(e.target.value),className:"flex-1 min-w-0 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500","aria-label":"Email address",required:!0}),(0,r.jsx)(i.z,{type:"submit",disabled:h,className:"px-5",children:h?"Sending…":"Send report"})]})]})]})})]}),(0,r.jsx)(k,{score:N,maxScore:S,band:_,quizTitle:(null==P?void 0:P.title)||"Assessment",quizSlug:(null==P?void 0:P.slug)||j,responses:R,onRetake:()=>{y.push("/quizzes")},onShare:()=>{try{navigator.clipboard.writeText(window.location.href)}catch(e){}}})]})]})}},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"notFound")&&n.d(t,{notFound:function(){return r.notFound}}),n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},55775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=n(47043);n(57437),n(2265);let l=r._(n(15602));function s(e,t){var n;let r={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,l.default)({...s,modules:null==(n=s.loadableGenerated)?void 0:n.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let r=n(18993);function l(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return n}},15602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let r=n(57437),l=n(2265),s=n(81523),a=n(70049);function i(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},n=(0,l.lazy)(()=>t.loader().then(i)),u=t.loading;function d(e){let i=u?(0,r.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(a.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(n,{...e})]}):(0,r.jsx)(s.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(n,{...e})});return(0,r.jsx)(l.Suspense,{fallback:i,children:o})}return d.displayName="LoadableComponent",d}},70049:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return s}});let r=n(57437),l=n(20544);function s(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,l.getExpectedRequestStore)("next/dynamic css"),s=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));s.push(...t)}}return 0===s.length?null:(0,r.jsx)(r.Fragment,{children:s.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[6137,2972,7216,2560,2971,2117,1744],function(){return e(e.s=83122)}),_N_E=e.O()}]);