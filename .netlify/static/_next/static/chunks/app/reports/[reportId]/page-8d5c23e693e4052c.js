(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4882],{83122:function(e,t,r){Promise.resolve().then(r.bind(r,44019))},44019:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(57437),a=r(2265),i=r(99376),o=r(27648),s=r(84226),l=r(30087),d=r(55775),c=r.n(d),u=r(175),m=r(99178),f=r(93772);function p(){let[e,t]=(0,a.useState)(!1),[d,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),g=(0,i.useParams)(),v=(0,i.useSearchParams)(),b=(0,i.useRouter)(),y=(null==g?void 0:g.reportId)||"",w=null==v?void 0:v.get("score"),j=null==v?void 0:v.get("maxScore");null==v||v.get("quizId");let N=Number(null!=w?w:72),_=Number(null!=j?j:100),S=(0,u.D9)(y),C=(0,u.tF)(N,_),k=(0,a.useMemo)(()=>((null==S?void 0:S.questions)||[]).map((e,t)=>{var r;return{questionId:null!==(r=e.id)&&void 0!==r?r:String(t+1),questionText:e.text,answer:"—",questionType:"text"}}),[S]),R=(0,a.useMemo)(()=>{try{var e,t;return(null===(t=crypto)||void 0===t?void 0:null===(e=t.randomUUID)||void 0===e?void 0:e.call(t))||Math.random().toString(36).slice(2)}catch(e){return Math.random().toString(36).slice(2)}},[]),P="/chat/".concat(R,"?quizId=").concat(encodeURIComponent(y),"&band=").concat(encodeURIComponent(C.label),"&score=").concat(encodeURIComponent(String(N)),"&maxScore=").concat(encodeURIComponent(String(_))),z=c()(()=>Promise.all([r.e(5520),r.e(7611),r.e(2441)]).then(r.bind(r,97611)).then(e=>e.QuizReportVisualization),{loadableGenerated:{webpack:()=>[97611]},ssr:!1,loading:()=>(0,n.jsx)("div",{className:"h-64 bg-gradient-to-br from-purple-100 to-purple-200 rounded-lg animate-pulse"})}),O="http://localhost:3000",I="".concat(O,"/reports/").concat(y),q={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"".concat(O,"/")},{"@type":"ListItem",position:2,name:"Reports",item:"".concat(O,"/reports")},{"@type":"ListItem",position:3,name:(null==S?void 0:S.title)||"Assessment Report",item:I}]};return(0,n.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-purple-50",children:[(0,n.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(q)}}),(0,n.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,n.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,n.jsx)(o.default,{href:"/reports",className:"inline-flex items-center text-sm text-purple-700 hover:text-purple-800",children:"← Back to reports"})}),(0,n.jsxs)(m.Zb,{className:"mb-8",children:[(0,n.jsx)(m.Ol,{children:(0,n.jsx)(m.ll,{className:"text-2xl",children:(null==S?void 0:S.title)||"Assessment Report"})}),(0,n.jsx)(m.aY,{children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-700",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Summary:"})," ",C.label]}),(0,n.jsxs)("div",{className:"hidden md:block text-gray-600",children:[(0,n.jsx)("span",{className:"font-semibold",children:"Brief insight:"})," ",C.advice]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-semibold",children:"Quiz:"})," ",(null==S?void 0:S.slug)||y]}),(0,n.jsxs)("div",{className:"ml-auto flex flex-col gap-3 items-end",children:[(0,n.jsx)(l.default,{href:P,surface:"report_detail",eventName:"report_chat_start",variant:"uiverse",className:"whitespace-nowrap",children:"Ask AI about this report"}),(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)(l.default,{surface:"report_detail",eventName:"email_detailed_report_click",variant:"outline",className:"whitespace-nowrap",onClick:()=>t(e=>!e),children:"Email detailed report"})}),e&&(0,n.jsxs)("form",{className:"flex flex-col sm:flex-row gap-3 w-full",onSubmit:async e=>{if(e.preventDefault(),!d||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){f.A.error("Please enter a valid email");return}try{x(!0);let e=await fetch("/api/quiz/email-results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d,quizId:y,quizTitle:(null==S?void 0:S.title)||y,score:N,maxScore:_,band:C.label})});if(e.ok)f.A.success("Detailed report will arrive by email shortly."),t(!1),p("");else{let t=await e.json().catch(()=>({}));f.A.error(t.error||"Failed to queue email")}}catch(e){f.A.error("Network error. Please try again.")}finally{x(!1)}},children:[(0,n.jsx)("input",{type:"email",inputMode:"email",placeholder:"Enter your email",value:d,onChange:e=>p(e.target.value),className:"flex-1 min-w-0 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500","aria-label":"Email address",required:!0}),(0,n.jsx)(s.z,{type:"submit",disabled:h,className:"px-5",children:h?"Sending…":"Send report"})]})]})]})})]}),(0,n.jsx)(z,{score:N,maxScore:_,band:C,quizTitle:(null==S?void 0:S.title)||"Assessment",quizSlug:(null==S?void 0:S.slug)||y,responses:k,onRetake:()=>{b.push("/quizzes")},onShare:()=>{try{navigator.clipboard.writeText(window.location.href)}catch(e){}}})]})]})}},84226:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var n=r(57437),a=r(2265),i=r(94508);let o=(0,a.forwardRef)((e,t)=>{let{className:r,variant:a="default",size:o="md",asChild:s,loading:l,children:d,disabled:c,...u}=e,m="inline-flex items-center justify-center font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none relative overflow-hidden group",f={default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90 hover:shadow-md active:scale-[0.98]",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/5 hover:text-primary/90 shadow-sm hover:shadow-md active:scale-[0.98]",ghost:"text-primary hover:bg-primary/10 hover:text-primary/90 active:scale-[0.98]",secondary:"bg-gray-800 text-white shadow-sm hover:bg-gray-900 hover:shadow-md active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90 hover:shadow-md active:scale-[0.98]",gradient:"bg-gradient-to-r from-purple-400 to-indigo-400 text-white shadow-md hover:from-purple-500 hover:to-indigo-500 hover:shadow-lg active:scale-[0.98]",premium:"bg-gradient-to-r from-purple-400 to-indigo-400 text-white shadow-md hover:from-purple-500 hover:to-indigo-500 hover:shadow-lg active:scale-[0.98] border-0",uiverse:"relative isolate text-white rounded-2xl bg-gradient-to-r from-violet-500 via-fuchsia-500 to-indigo-500 shadow-[0_8px_30px_rgba(99,102,241,0.25)] hover:shadow-[0_12px_40px_rgba(99,102,241,0.35)] ring-1 ring-white/10 hover:ring-white/20 focus-visible:ring-2 focus-visible:ring-white/60 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-900/0"},p={sm:"h-9 px-4 text-sm rounded-lg",md:"h-11 px-6 text-base rounded-xl",lg:"h-13 px-8 text-lg rounded-xl",xl:"h-16 px-10 text-xl rounded-2xl"};return s?(0,n.jsxs)("span",{className:(0,i.cn)(m,f[a],p[o],l&&"pointer-events-none",r),children:[l&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"})}),(0,n.jsx)("span",{className:l?"opacity-0":"opacity-100",children:d})]}):(0,n.jsxs)("button",{className:(0,i.cn)(m,f[a],p[o],l&&"pointer-events-none",r),disabled:c||l,ref:t,...u,children:[l&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"})}),(0,n.jsx)("span",{className:l?"opacity-0":"opacity-100 transition-opacity",children:d}),(0,n.jsx)("div",{className:"absolute inset-0 -z-10 bg-white/20 scale-0 group-active:scale-100 transition-transform duration-200 rounded-inherit"})]})});o.displayName="Button"},99178:function(e,t,r){"use strict";r.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},ll:function(){return l}});var n=r(57437),a=r(2265),i=r(94508);let o=(0,a.forwardRef)((e,t)=>{let{className:r,hover:a,variant:o="default",size:s="md",...l}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("transition-all duration-300 group",{default:"bg-white border border-black/10 shadow-sm",elevated:"bg-white border border-black/10 shadow-lg",glass:"glass border border-white/20",gradient:"bg-gradient-to-br from-white to-lilac-50 border border-black/10 shadow-md",premium:"bg-gradient-to-br from-white to-lilac-50 border border-black/10 shadow-md"}[o],{sm:"rounded-lg",md:"rounded-xl",lg:"rounded-2xl"}[s],a&&"hover:shadow-lg hover:-translate-y-1 hover:scale-[1.01] cursor-pointer","animate-fade-in",r),...l})});o.displayName="Card";let s=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-2 p-6 pb-4",r),...a})});s.displayName="CardHeader";let l=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-xl font-semibold leading-tight text-foreground tracking-tight","group-hover:text-primary transition-colors duration-200",r),...a})});l.displayName="CardTitle";let d=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground leading-relaxed","group-hover:text-lilac-700 transition-colors duration-200",r),...a})});d.displayName="CardDescription";let c=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0 gap-2",r),...a})}).displayName="CardFooter"},30087:function(e,t,r){"use strict";var n=r(57437);r(2265);var a=r(27648),i=r(84226),o=r(3548);t.default=function(e){let{href:t,children:r,className:s,size:l="md",variant:d="gradient",surface:c,eventName:u="start_journey",analytics:m,onClick:f,target:p,rel:h}=e,x=e=>{try{(0,o.L9)(u,{surface:c,...m})}catch(e){}null==f||f(e)};return t?(0,n.jsx)(i.z,{variant:d,size:l,className:s,asChild:!0,children:(0,n.jsx)(a.default,{href:t,onClick:x,target:p,rel:h,children:r})}):(0,n.jsx)(i.z,{variant:d,size:l,className:s,onClick:x,children:r})}},3548:function(e,t,r){"use strict";function n(e,t){console.log("\uD83D\uDCCA Event tracked:",e,t),void 0!==window.gtag&&window.gtag("event",e,t),fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:e,data:t,timestamp:Date.now()})}).catch(()=>{})}r.d(t,{L9:function(){return n}}),r(2265)},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(61994),a=r(53335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(72972),a=r.n(n)},55775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let n=r(47043);r(57437),r(2265);let a=n._(r(15602));function i(e,t){var r;let n={loading:e=>{let{error:t,isLoading:r,pastDelay:n}=e;return null}};"function"==typeof e&&(n.loader=e);let i={...n,...t};return(0,a.default)({...i,modules:null==(r=i.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=r(18993);function a(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},15602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let n=r(57437),a=r(2265),i=r(81523),o=r(70049);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},d=function(e){let t={...l,...e},r=(0,a.lazy)(()=>t.loader().then(s)),d=t.loading;function c(e){let s=d?(0,n.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(o.PreloadCss,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(a.Suspense,{fallback:s,children:l})}return c.displayName="LoadableComponent",c}},70049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return i}});let n=r(57437),a=r(20544);function i(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,a.getExpectedRequestStore)("next/dynamic css"),i=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));i.push(...t)}}return 0===i.length?null:(0,n.jsx)(n.Fragment,{children:i.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[6137,2972,4438,3508,2971,2117,1744],function(){return e(e.s=83122)}),_N_E=e.O()}]);