(()=>{var e={};e.id=3273,e.ids=[3273],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(58152),s(35044),s(15778),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["chat",{children:["[sessionId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58152)),"/Users/niharikasai/mybeing/app/chat/[sessionId]/page.tsx"]}]},{}]},{metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}]},{layout:[()=>Promise.resolve().then(s.bind(s,35044)),"/Users/niharikasai/mybeing/app/layout.tsx"],template:[()=>Promise.resolve().then(s.bind(s,15778)),"/Users/niharikasai/mybeing/app/template.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}],c=["/Users/niharikasai/mybeing/app/chat/[sessionId]/page.tsx"],u="/chat/[sessionId]/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/chat/[sessionId]/page",pathname:"/chat/[sessionId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},98889:(e,t,s)=>{Promise.resolve().then(s.bind(s,61566))},61566:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(10326),a=s(17577),i=s(35047),n=s(86131);function o(){let e=(0,i.useParams)(),t=(0,i.useSearchParams)(),s=e?.sessionId||"",[o,l]=(0,a.useState)([]),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),p=(0,a.useRef)(null),[f,g]=(0,a.useState)(0),[b,y]=(0,a.useState)(!1),v=t?.get("quizId")||"",w=t?.get("band")||"",j=t?.get("score")||"",N=t?.get("maxScore")||"";(0,a.useMemo)(()=>{let e=[];return v&&e.push(`quiz=${v}`),w&&e.push(`band=${w}`),j&&N&&e.push(`score=${j}/${N}`),e.join(" | ")||"general"},[v,w,j,N]);let{trackMessage:D}={trackMessage:e=>{(0,n.DK)(s,e)}};(0,a.useCallback)(async()=>{try{let e=w&&j&&N?`I see your result is "${w}" with a score of ${j}/${N}.`:void 0,t=["Hi! I'm here to help you understand your quiz results better.",e,"You can ask up to 6 questions in this session. After that, I'll summarize with a simple, actionable plan for you.","What would you like to explore first?"].filter(Boolean).join("\n\n"),s={role:"assistant",content:t,timestamp:new Date};l([s])}catch(e){console.error("Failed to initialize chat:",e)}},[w,j,N]);let k=async()=>{if(!d.trim()||u)return;if(b){let e={role:"assistant",content:"You've reached the 6-question limit for this session. You can start a new session from your report or dashboard anytime.",timestamp:new Date};l(t=>[...t,e]);try{D("assistant")}catch{}return}let e={id:Date.now().toString(),content:d,role:"user",timestamp:new Date},t=o.filter(e=>"user"===e.role).length+1;l(t=>[...t,e]),c(""),m(!0);try{D("user")}catch{}try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:s,message:d,conversationHistory:o})}),r=await e.json(),a={id:(Date.now()+1).toString(),content:r.response||"I apologize, but I encountered an error. Please try asking your question again.",role:"assistant",timestamp:new Date};l(e=>[...e,a]);try{D("assistant")}catch{}if(g(t),t>=6){let e={id:(Date.now()+2).toString(),content:["Your 4-week plan","",[w?`Band: ${w}.`:"",j&&N?`Score: ${j}/${N}.`:""].filter(Boolean).join(" "),"","Daily (EMA micro-check-in):","- 2 minutes: note one situation, your reaction, and value alignment (yes/no).","","Weekly:","- Pick one small behavior to align better with a value (eg, honest conversation, screen cutoff).","- Do a 10-min reflection on patterns (justification, belief shift, selective evidence, identity protection, social reality).","","Monthly:","- Review your log. Identify 1–2 repeating patterns and one concrete next habit.","","Tip:","Use a “pause and reflect” cue when you notice instant justification. Ask: “What value matters here?”"].join("\n"),role:"assistant",timestamp:new Date};l(t=>[...t,e]);try{D("assistant")}catch{}y(!0)}}catch(t){console.error("Chat error:",t);let e={id:(Date.now()+3).toString(),content:"I apologize, but I encountered an error. Please try asking your question again.",role:"assistant",timestamp:new Date};l(t=>[...t,e])}finally{m(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary/5 relative overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[r.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-primary/10 to-purple-500/10 rounded-full blur-3xl animate-float"}),r.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-indigo-500/10 to-cyan-500/10 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),r.jsx("div",{className:"relative glass border-b border-white/20 backdrop-blur-xl supports-[backdrop-filter]:bg-white/80 px-4 py-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-purple-600 rounded-2xl flex items-center justify-center text-white text-xl shadow-soft",children:"\uD83E\uDD16"}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"AI Results Discussion"}),r.jsx("p",{className:"text-muted-foreground",children:"Get personalized insights about your quiz results and next steps"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2",children:"\uD83E\uDDE0"}),"Contextual AI"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDD12"}),"Private & Secure"]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("span",{className:"mr-2",children:"\uD83D\uDCA1"}),"Actionable Insights"]})]})]})}),r.jsx("div",{className:"relative flex-1 overflow-y-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[o.map((e,t)=>r.jsx("div",{className:`flex ${"user"===e.role?"justify-end":"justify-start"} animate-fade-in`,children:(0,r.jsxs)("div",{className:`flex items-start space-x-3 max-w-3xl ${"user"===e.role?"flex-row-reverse space-x-reverse":""}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm flex-shrink-0 ${"user"===e.role?"bg-gradient-to-br from-primary to-purple-600 text-white":"bg-gradient-to-br from-emerald-500 to-teal-600 text-white"}`,children:"user"===e.role?"\uD83D\uDC64":"\uD83E\uDD16"}),(0,r.jsxs)("div",{className:`px-6 py-4 rounded-2xl shadow-soft transition-all duration-200 hover:shadow-medium ${"user"===e.role?"bg-gradient-to-br from-primary to-purple-600 text-white":"bg-white border border-border text-foreground"}`,children:[r.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:e.content}),r.jsx("div",{className:`text-xs mt-3 ${"user"===e.role?"text-white/70":"text-muted-foreground"}`,children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},t)),u&&r.jsx("div",{className:"flex justify-start animate-fade-in",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3 max-w-3xl",children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center text-sm text-white",children:"\uD83E\uDD16"}),r.jsx("div",{className:"bg-white border border-border rounded-2xl px-6 py-4 shadow-soft",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),r.jsx("div",{ref:p})]})}),r.jsx("div",{className:"relative glass border-t border-white/20 backdrop-blur-xl supports-[backdrop-filter]:bg-white/80 px-4 py-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[r.jsx("textarea",{value:d,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k())},placeholder:"Ask me about your results, patterns, or what you should do next...",className:"w-full px-6 py-4 border border-border rounded-2xl focus:ring-2 focus:ring-primary focus:border-primary resize-none shadow-soft bg-white/90 backdrop-blur-sm transition-all duration-200 placeholder:text-muted-foreground",rows:2,disabled:u}),r.jsx("div",{className:"absolute bottom-3 right-3 text-xs text-muted-foreground",children:"Press Enter to send"})]}),r.jsx("button",{onClick:k,disabled:!d.trim()||u,className:"px-8 py-4 bg-gradient-to-r from-primary to-purple-600 text-white font-semibold rounded-2xl shadow-glow hover:shadow-glow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 transition-all duration-300 flex items-center",children:u?r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"mr-2",children:"Send"}),r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[r.jsx("div",{className:"text-xs text-muted-foreground font-medium mb-2 w-full",children:"\uD83D\uDCA1 Quick suggestions:"}),["What does my score mean?","How can I improve?","What should I focus on?","Show me patterns in my results"].map(e=>r.jsx("button",{onClick:()=>c(e),className:"px-3 py-2 text-xs bg-primary/10 text-primary rounded-full border border-primary/20 hover:bg-primary/20 transition-colors duration-200",children:e},e))]})]})})]})}},58152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/niharikasai/mybeing/app/chat/[sessionId]/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8948,1907,9925],()=>s(78648));module.exports=r})();