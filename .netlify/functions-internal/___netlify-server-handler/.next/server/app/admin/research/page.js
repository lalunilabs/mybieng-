(()=>{var e={};e.id=9153,e.ids=[9153],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},83542:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d}),t(2309),t(3138),t(35044),t(15778),t(35866);var r=t(23191),a=t(88716),i=t(37922),n=t.n(i),l=t(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d=["",{children:["admin",{children:["research",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2309)),"/Users/niharikasai/mybeing/app/admin/research/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3138)),"/Users/niharikasai/mybeing/app/admin/layout.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}]},{layout:[()=>Promise.resolve().then(t.bind(t,35044)),"/Users/niharikasai/mybeing/app/layout.tsx"],template:[()=>Promise.resolve().then(t.bind(t,15778)),"/Users/niharikasai/mybeing/app/template.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}],c=["/Users/niharikasai/mybeing/app/admin/research/page.tsx"],m="/admin/research/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/research/page",pathname:"/admin/research",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37743:(e,s,t)=>{Promise.resolve().then(t.bind(t,366))},69705:(e,s,t)=>{Promise.resolve().then(t.bind(t,90725)),Promise.resolve().then(t.bind(t,11750))},366:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(10326),a=t(17577);function i(){let[e,s]=(0,a.useState)(null),[t,i]=(0,a.useState)(""),[n,l]=(0,a.useState)(null),[o,d]=(0,a.useState)("json"),[c,m]=(0,a.useState)("all"),x=async e=>{i(e);try{let s=await fetch(`/api/admin/research/quiz/${encodeURIComponent(e)}/insights?timeRange=${c}`);if(s.ok){let e=await s.json();l(e)}}catch{}},h=async()=>{try{let e=await fetch(`/api/admin/research/export?format=${o}&timeRange=${c}`);if(!e.ok)return;let s=await e.blob(),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`research-data-${new Date().toISOString().split("T")[0]}.${o}`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}catch{}},u=async e=>{if(t)try{let s=await fetch(`/api/admin/research/quiz/${encodeURIComponent(t)}/export?format=${e}&timeRange=${c}`);if(!s.ok)return;let r=await s.blob(),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=`${t}-research-${new Date().toISOString().split("T")[0]}.${e}`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch{}},p=async()=>{if(t)try{let e=await fetch(`/api/admin/research/quiz/${encodeURIComponent(t)}/report?timeRange=${c}`);if(!e.ok)return;let s=await e.blob(),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`${t}-research-report-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}catch{}};return e?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Research Dashboard"}),r.jsx("p",{className:"text-gray-600",children:"Anonymous data analysis for quiz improvement"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm","aria-label":"Time range",children:[r.jsx("option",{value:"24h",children:"Last 24h"}),r.jsx("option",{value:"7d",children:"Last 7d"}),r.jsx("option",{value:"30d",children:"Last 30d"}),r.jsx("option",{value:"90d",children:"Last 90d"}),r.jsx("option",{value:"all",children:"All time"})]}),(0,r.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[r.jsx("option",{value:"json",children:"JSON"}),r.jsx("option",{value:"csv",children:"CSV"})]}),r.jsx("button",{onClick:h,className:"px-4 py-2 bg-brand-600 text-white rounded-md hover:bg-brand-700 text-sm",children:"Export Data"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 text-sm",children:"\uD83D\uDCCA"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Responses"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalResponses})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-green-600 text-sm",children:"\uD83E\uDDE0"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Quizzes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Object.keys(e.quizBreakdown).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 text-sm",children:"⏰"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Peak Hours"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[e.timeAnalytics.peakUsageHours.slice(0,2).join(", "),"h"]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 text-sm",children:"\uD83D\uDCC8"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Questions Analyzed"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.responsePatterns.length})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quiz Response Distribution"}),r.jsx("div",{className:"space-y-3",children:Object.entries(e.quizBreakdown).map(([s,a])=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>x(s),className:"text-brand-600 hover:text-brand-700 font-medium text-sm",children:s.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),t===s&&r.jsx("span",{className:"text-xs bg-brand-100 text-brand-700 px-2 py-1 rounded",children:"Selected"}),r.jsx("a",{href:`/quizzes/${s}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View"}),r.jsx("a",{href:`/admin/quizzes?slug=${encodeURIComponent(s)}`,className:"text-xs text-gray-700 hover:underline",children:"Edit"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[a," responses"]}),r.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-brand-600 h-2 rounded-full",style:{width:`${a/e.totalResponses*100}%`}})})]})]},s))})]}),n&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-3",children:[(0,r.jsxs)("span",{children:["Insights: ",t.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())]}),r.jsx("a",{href:`/quizzes/${t}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View page"}),r.jsx("a",{href:`/admin/quizzes?slug=${encodeURIComponent(t)}`,className:"text-xs text-gray-700 hover:underline",children:"Edit in Admin"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Time Range:"}),(0,r.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:[r.jsx("option",{value:"24h",children:"Last 24h"}),r.jsx("option",{value:"7d",children:"Last 7d"}),r.jsx("option",{value:"30d",children:"Last 30d"}),r.jsx("option",{value:"90d",children:"Last 90d"}),r.jsx("option",{value:"all",children:"All time"})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[r.jsx("button",{onClick:()=>u("json"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm",children:"Export Selected (JSON)"}),r.jsx("button",{onClick:()=>u("csv"),className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-md text-sm",children:"Export Selected (CSV)"}),r.jsx("button",{onClick:p,className:"px-3 py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-md text-sm",children:"Download Report (.md)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Performance Metrics"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Completions:"}),r.jsx("span",{className:"text-sm font-medium",children:n.totalCompletions})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Average Score:"}),r.jsx("span",{className:"text-sm font-medium",children:n.averageScore.toFixed(1)})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Score Distribution"}),r.jsx("div",{className:"space-y-2",children:Object.entries(n.scoreDistribution).map(([e,s])=>(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[e,":"]}),r.jsx("span",{className:"text-sm font-medium",children:s})]},e))})]})]}),n.commonResponsePatterns.length>0&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Response Patterns"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.commonResponsePatterns.map((e,s)=>r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},s))})]}),n.improvementSuggestions.length>0&&(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Improvement Suggestions"}),r.jsx("ul",{className:"space-y-2",children:n.improvementSuggestions.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start space-x-2",children:[r.jsx("span",{className:"text-yellow-500 mt-0.5",children:"\uD83D\uDCA1"}),r.jsx("span",{className:"text-sm text-gray-700",children:e})]},s))})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Question Analysis"}),r.jsx("div",{className:"space-y-4",children:e.responsePatterns.slice(0,5).map((e,s)=>(0,r.jsxs)("div",{className:"border-l-4 border-brand-200 pl-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 text-sm mb-2",children:e.questionText}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[e.averageScore&&(0,r.jsxs)("span",{children:["Avg Score: ",e.averageScore.toFixed(1)]}),(0,r.jsxs)("span",{children:["Responses: ",Object.values(e.responseDistribution).reduce((e,s)=>e+s,0)]}),e.commonPatterns.length>0&&(0,r.jsxs)("span",{children:["Patterns: ",e.commonPatterns.join(", ")]})]})]},s))})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("span",{className:"text-blue-500 mt-0.5",children:"\uD83D\uDD12"}),(0,r.jsxs)("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900",children:"Privacy & Research Ethics"}),r.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"All data collected is completely anonymous. No personal information, email addresses, or identifying details are stored. This research data helps improve quiz quality and provides insights into behavioral patterns for academic research purposes."})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("div",{className:"text-gray-500",children:"Loading research data..."})})}function n(){return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx(i,{})})})}},11750:(e,s,t)=>{"use strict";t.d(s,{Navbar:()=>m});var r=t(10326),a=t(90434),i=t(35047),n=t(17577),l=t(81849),o=t(63470),d=t(94019),c=t(90748);function m(){let[e,s]=(0,n.useState)(!1),t=(0,i.usePathname)(),m=e=>"/"===e?"/"===t:t?.startsWith(e);return r.jsx("nav",{className:"fixed top-0 left-0 right-0 z-[9999] bg-white/90 supports-[backdrop-filter]:backdrop-blur-md border-b border-gray-200/70 shadow-sm",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[r.jsx(a.default,{href:"/",className:"flex items-center group","aria-label":"MyBeing Home",children:r.jsx("span",{className:"font-display text-2xl md:text-3xl font-semibold tracking-tight text-gray-900 group-hover:text-primary transition-colors",children:"MyBeing"})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6",children:[(0,r.jsxs)(a.default,{href:"/","aria-current":m("/")?"page":void 0,className:`text-slate-900 hover:text-primary transition-colors font-medium text-sm relative group ${m("/")?"text-primary":""}`,children:["Home",r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-400 transition-all duration-300 group-hover:w-full"})]}),(0,r.jsxs)(a.default,{href:"/blog","aria-current":m("/blog")?"page":void 0,className:`text-slate-900 hover:text-primary transition-colors font-medium text-sm relative group ${m("/blog")?"text-primary":""}`,children:["Articles",r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-400 transition-all duration-300 group-hover:w-full"})]}),(0,r.jsxs)(a.default,{href:"/quizzes","aria-current":m("/quizzes")?"page":void 0,className:`text-slate-900 hover:text-primary transition-colors font-medium text-sm relative group ${m("/quizzes")?"text-primary":""}`,children:["Quizzes",r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-400 transition-all duration-300 group-hover:w-full"})]}),(0,r.jsxs)(a.default,{href:"/research","aria-current":m("/research")?"page":void 0,className:`text-slate-900 hover:text-primary transition-colors font-medium text-sm relative group ${m("/research")?"text-primary":""}`,children:["Research",r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-400 transition-all duration-300 group-hover:w-full"})]}),(0,r.jsxs)(a.default,{href:"/about","aria-current":m("/about")?"page":void 0,className:`text-slate-900 hover:text-primary transition-colors font-medium text-sm relative group ${m("/about")?"text-primary":""}`,children:["About",r.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-400 transition-all duration-300 group-hover:w-full"})]}),r.jsx(o.default,{href:"/blog",size:"sm",surface:"navbar_desktop",variant:"uiverse",className:"shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:"Read Articles"})]}),r.jsx("div",{className:"md:hidden",children:r.jsx("button",{onClick:()=>s(!e),className:"text-slate-900 hover:text-primary transition-colors p-2 rounded-lg border border-gray-200 bg-white/70",children:e?r.jsx(d.Z,{size:24}):r.jsx(c.Z,{size:24})})})]}),e&&r.jsx(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"md:hidden bg-white border-t border-purple-200/50 py-4",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[r.jsx(a.default,{href:"/","aria-current":m("/")?"page":void 0,className:`text-gray-900 hover:text-primary transition-colors font-medium px-4 py-2 ${m("/")?"text-primary":""}`,onClick:()=>s(!1),children:"Home"}),r.jsx(a.default,{href:"/blog","aria-current":m("/blog")?"page":void 0,className:`text-gray-900 hover:text-primary transition-colors font-medium px-4 py-2 ${m("/blog")?"text-primary":""}`,onClick:()=>s(!1),children:"Articles"}),r.jsx(a.default,{href:"/quizzes","aria-current":m("/quizzes")?"page":void 0,className:`text-gray-900 hover:text-primary transition-colors font-medium px-4 py-2 ${m("/quizzes")?"text-primary":""}`,onClick:()=>s(!1),children:"Quizzes"}),r.jsx(a.default,{href:"/research","aria-current":m("/research")?"page":void 0,className:`text-gray-900 hover:text-primary transition-colors font-medium px-4 py-2 ${m("/research")?"text-primary":""}`,onClick:()=>s(!1),children:"Research"}),r.jsx(a.default,{href:"/about","aria-current":m("/about")?"page":void 0,className:`text-gray-900 hover:text-primary transition-colors font-medium px-4 py-2 ${m("/about")?"text-primary":""}`,onClick:()=>s(!1),children:"About"}),r.jsx("div",{className:"px-4 pt-2",children:r.jsx(o.default,{href:"/blog",surface:"navbar_mobile",variant:"uiverse",className:"w-full shadow-lg",onClick:()=>s(!1),children:"Read Articles"})})]})})]})})}},63470:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(10326);t(17577);var a=t(90434),i=t(3679),n=t(84348);let l=function({href:e,children:s,className:t,size:l="md",variant:o="gradient",surface:d,eventName:c="start_journey",analytics:m,onClick:x,target:h,rel:u}){let p=e=>{try{(0,n.L9)(c,{surface:d,...m})}catch{}x?.(e)};return e?r.jsx(i.z,{variant:o,size:l,className:t,asChild:!0,children:r.jsx(a.default,{href:e,onClick:p,target:h,rel:u,children:s})}):r.jsx(i.z,{variant:o,size:l,className:t,onClick:p,children:s})}},3138:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(19510);let a=(0,t(68570).createProxy)(String.raw`/Users/niharikasai/mybeing/components/layout/Navbar.tsx#Navbar`);var i=t(66138),n=t(6659),l=t(71615),o=t(58585);async function d({children:e}){let s=await (0,n.vN)(),t=l.cookies().get("admin_auth")?.value==="1";return s||t||(0,o.redirect)("/admin/login"),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-purple-50",children:[r.jsx(a,{}),r.jsx("main",{className:"pt-16",children:e}),r.jsx(i.Z,{})]})}},2309:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/niharikasai/mybeing/app/admin/research/page.tsx#default`)},6659:(e,s,t)=>{"use strict";t.d(s,{Wg:()=>u,p$:()=>x,v9:()=>h,vN:()=>p});var r=t(71615),a=t(41482),i=t.n(a),n=t(84770);let l={super_admin:["users.read","users.write","users.delete","content.read","content.write","content.delete","subscriptions.read","subscriptions.write","ai_chat.read","ai_chat.moderate","system.read","system.write","analytics.read","reports.read","reports.export","settings.read","settings.write","security.read","security.write","admin.manage"]},o=process.env.OWNER_EMAIL||"",d=process.env.ADMIN_PASSWORD||"",c=Number(process.env.ADMIN_SESSION_TIMEOUT||"86400"),m=Number.isFinite(c)&&c>0?1e3*c:864e5;class x extends Error{constructor(e,s){super(e),this.code=s,this.name="AdminAuthError"}}async function h(e,s){if(!o||!d)throw new x("Admin not configured","ADMIN_NOT_CONFIGURED");let t=Buffer.from(e),r=Buffer.from(o),a=Buffer.from(s),c=Buffer.from(d),h=t.length===r.length&&(0,n.timingSafeEqual)(t,r),u=a.length===c.length&&(0,n.timingSafeEqual)(a,c);if(!h||!u)throw new x("Invalid credentials","INVALID_CREDENTIALS");let p={id:"admin_owner",email:o,name:o.split("@")[0],role:"super_admin",permissions:l.super_admin,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},g=i().sign({userId:p.id,email:p.email,role:p.role},function(){let e=process.env.ADMIN_JWT_SECRET;if(!e||e.length<16)throw new x("Admin not configured","ADMIN_NOT_CONFIGURED");return e}(),{expiresIn:`${Math.floor(m/1e3)}s`});return{user:p,token:g,expiresAt:new Date(Date.now()+m).toISOString()}}async function u(e){try{let s=process.env.ADMIN_JWT_SECRET;if(!s)return null;let t=i().verify(e,s);if(!t?.email||t.email!==o)return null;return{id:"admin_owner",email:o,name:o.split("@")[0],role:"super_admin",permissions:l.super_admin,createdAt:"2023-01-01T00:00:00Z",lastLogin:new Date().toISOString()}}catch(e){return null}}async function p(){try{let e=(0,r.cookies)(),s=e.get("admin_token")?.value;if(!s)return null;return await u(s)}catch(e){return null}}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[8948,1907,4261,4054,9925],()=>t(83542));module.exports=r})();