(()=>{var e={};e.id=9985,e.ids=[9985],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},87407:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o}),a(22795),a(3138),a(35044),a(15778),a(35866);var s=a(23191),i=a(88716),r=a(37922),l=a.n(r),n=a(95231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(t,d);let o=["",{children:["admin",{children:["articles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,22795)),"/Users/niharikasai/mybeing/app/admin/articles/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3138)),"/Users/niharikasai/mybeing/app/admin/layout.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}]},{layout:[()=>Promise.resolve().then(a.bind(a,35044)),"/Users/niharikasai/mybeing/app/layout.tsx"],template:[()=>Promise.resolve().then(a.bind(a,15778)),"/Users/niharikasai/mybeing/app/template.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.json"}}],c=["/Users/niharikasai/mybeing/app/admin/articles/page.tsx"],m="/admin/articles/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/articles/page",pathname:"/admin/articles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},17503:(e,t,a)=>{Promise.resolve().then(a.bind(a,41913)),Promise.resolve().then(a.bind(a,57311))},41913:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var s=a(10326),i=a(17577);function r(){let[e,t]=(0,i.useState)([]),[a,r]=(0,i.useState)(""),[l,n]=(0,i.useState)(""),[d,o]=(0,i.useState)(""),[c,m]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),[u,x]=(0,i.useState)(!0),[g,y]=(0,i.useState)(!1),[f,b]=(0,i.useState)(""),[j,v]=(0,i.useState)("");(0,i.useMemo)(()=>e.find(e=>e.slug===a),[e,a]);let N=async()=>{x(!0);try{let e=await fetch("/api/admin/articles");if(!e.ok)throw Error("Failed to load");let s=await e.json();t(s.items||[]),!a&&(s.items?.length??0)>0&&(r(s.items[0].slug),n(JSON.stringify(s.items[0],null,2)))}catch(e){o(e?.message||"Failed to load")}finally{x(!1)}},w=async()=>{try{let e=JSON.parse(l||"{}");if(j){let t=new Date(j).toISOString();e.publishedAt=t}else delete e.publishedAt;if(n(JSON.stringify(e,null,2)),p(!0),!(await fetch("/api/admin/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Save failed");await N()}catch(e){o(e?.message||"Failed to apply schedule")}finally{p(!1)}},S=async()=>{try{let e=JSON.parse(l||"{}");if(e.published=!0,e.publishedAt=new Date().toISOString(),n(JSON.stringify(e,null,2)),p(!0),!(await fetch("/api/admin/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Save failed");await N()}catch(e){o(e?.message||"Failed to publish now")}finally{p(!1)}},k=async()=>{try{let e=JSON.parse(l||"{}"),t=!(!1!==e.published);if(e.published=t,t&&!e.publishedAt&&(e.publishedAt=new Date().toISOString()),n(JSON.stringify(e,null,2)),p(!0),!(await fetch("/api/admin/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Save failed");await N()}catch(e){o(e?.message||"Toggle failed")}finally{p(!1)}},A=t=>{r(t);let a=e.find(e=>e.slug===t);n(JSON.stringify(a??{},null,2)),m("");try{let e=a?.publishedAt?new Date(a.publishedAt):void 0;if(e&&!isNaN(e.getTime())){let t=e=>String(e).padStart(2,"0"),a=`${e.getFullYear()}-${t(e.getMonth()+1)}-${t(e.getDate())}T${t(e.getHours())}:${t(e.getMinutes())}`;v(a)}else v("")}catch{v("")}o("")},M=async e=>{if(e){b(""),y(!0);try{let t=new FormData;t.append("file",e);let a=await fetch("/api/upload",{method:"POST",body:t}),s=await a.json();if(!a.ok||!s?.imageUrl)throw Error(s?.error||"Upload failed");try{let e=JSON.parse(l||"{}");e.imageUrl=s.imageUrl,e.ogImage||(e.ogImage=s.imageUrl),n(JSON.stringify(e,null,2))}catch{let e={imageUrl:s.imageUrl,ogImage:s.imageUrl};n(JSON.stringify(e,null,2))}}catch(e){b(e?.message||"Upload failed")}finally{y(!1)}}},C=async()=>{p(!0),o(""),m("");try{let e=JSON.parse(l);if(!e.slug||!e.title||!e.publishedAt)throw Error("slug, title, and publishedAt are required");let t=await fetch("/api/admin/articles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e?.error||"Save failed")}await N(),m("Saved.")}catch(e){o(e?.message||"Save failed")}finally{p(!1)}},O=async()=>{if(a&&confirm(`Delete article ${a}?`))try{if(!(await fetch(`/api/admin/articles?slug=${encodeURIComponent(a)}`,{method:"DELETE"})).ok)throw Error("Delete failed");r(""),n(""),await N()}catch(e){o(e?.message||"Delete failed")}};return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"font-medium",children:"Articles"}),s.jsx("button",{onClick:()=>{let e=new Date().toISOString(),t={id:crypto.randomUUID(),title:"New Article",slug:"new-article",excerpt:"Short summary...",content:"Full content here...",author:"MyBeing Research",publishedAt:e,tags:[],readTime:5,imageUrl:"",published:!1,relatedQuizzes:[],isPremium:!1,likes:0,price:0,metaTitle:"",metaDescription:"",keywords:[],canonicalUrl:"",ogImage:"",robots:"index,follow"};r(t.slug),n(JSON.stringify(t,null,2)),v(e.slice(0,16)),o(""),m("")},className:"px-3 py-1 rounded-md bg-brand-700 text-white",children:"New"})]}),(0,s.jsxs)("div",{className:"border rounded-md divide-y max-h-[60vh] overflow-auto",children:[u&&s.jsx("div",{className:"p-2 text-sm text-gray-500",children:"Loading..."}),e.map(e=>s.jsx("button",{onClick:()=>A(e.slug),className:`w-full text-left p-2 hover:bg-brand-50 ${a===e.slug?"bg-brand-100":""}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("div",{className:"font-medium",children:e.title}),s.jsx("div",{className:"text-xs text-gray-500",children:e.slug})]}),s.jsx("div",{className:"text-xs",children:!1!==e.published?"Published":"Draft"})]})},e.slug))]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"font-medium",children:"Editor"}),(0,s.jsxs)("div",{className:"space-x-2",children:[s.jsx("button",{onClick:()=>{o(""),m("");try{let e=JSON.parse(l||"{}"),t="http://localhost:3000",a=e.title||"",s=e.excerpt||e.metaDescription||"",i=e.metaTitle||`${a} | MyBeing`,r=(e.metaDescription||s||"").toString().replace(/\s+/g," ").trim().slice(0,160),d=Array.isArray(e.keywords)&&e.keywords.length?e.keywords:Array.from(new Set([...e.tags||[],"psychology","behavior","self-discovery"])).slice(0,8),o=e.canonicalUrl||`${t}/blog/${e.slug}`,c=e.ogImage||`${t}/api/og?title=${encodeURIComponent(a)}&subtitle=${encodeURIComponent(r)}`,h=e.robots||"index,follow",p={...e,metaTitle:i,metaDescription:r,keywords:d,canonicalUrl:o,ogImage:c,robots:h};n(JSON.stringify(p,null,2)),m("Meta generated. Review and Save to persist.")}catch(e){o(e?.message||"Failed to generate meta")}},className:"px-3 py-1 rounded-md bg-sky-700 text-white",children:"Generate Meta"}),s.jsx("button",{onClick:()=>{o(""),m("");try{let e=JSON.parse(l||"{}"),t=[];e.slug||t.push("Missing slug"),e.title||t.push("Missing title"),e.published&&!e.publishedAt&&t.push("Published items should have publishedAt"),e.metaTitle||t.push("Missing metaTitle"),(e.metaTitle||"").length>70&&t.push("metaTitle should be <= 70 chars"),e.metaDescription||t.push("Missing metaDescription"),(e.metaDescription||"").length>160&&t.push("metaDescription should be <= 160 chars"),e.canonicalUrl||t.push("Missing canonicalUrl"),Array.isArray(e.keywords)||t.push("keywords should be an array"),t.length?o("Meta validation failed:\n- "+t.join("\n- ")):m("Meta looks good.")}catch(e){o(e?.message||"Validation error")}},className:"px-3 py-1 rounded-md bg-amber-700 text-white",children:"Validate Meta"}),s.jsx("button",{onClick:k,className:"px-3 py-1 rounded-md bg-indigo-700 text-white",children:"Toggle Publish"}),s.jsx("button",{onClick:C,disabled:h,className:"px-3 py-1 rounded-md bg-green-700 text-white disabled:opacity-60",children:h?"Saving...":"Save"}),s.jsx("button",{onClick:O,className:"px-3 py-1 rounded-md bg-red-600 text-white",children:"Delete"})]})]}),d&&s.jsx("div",{className:"text-sm text-red-600 mb-2 whitespace-pre-wrap",children:d}),c&&s.jsx("div",{className:"text-sm text-green-700 mb-2",children:c}),(0,s.jsxs)("div",{className:"mb-3 flex items-center gap-3 p-3 rounded-md border bg-white",children:[s.jsx("label",{className:"text-sm font-medium",children:"Cover image"}),s.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&M(t)},disabled:g,className:"text-sm"}),g&&s.jsx("span",{className:"text-xs text-gray-500",children:"Uploading..."}),f&&s.jsx("span",{className:"text-xs text-red-600",children:f})]}),(0,s.jsxs)("div",{className:"mb-3 flex flex-wrap items-center gap-3 p-3 rounded-md border bg-white",children:[s.jsx("label",{className:"text-sm font-medium",children:"Publish at"}),s.jsx("input",{type:"datetime-local",value:j,onChange:e=>v(e.target.value),className:"text-sm border rounded px-2 py-1"}),s.jsx("button",{onClick:w,className:"px-3 py-1 rounded-md bg-blue-600 text-white",children:"Apply Schedule"}),s.jsx("button",{onClick:S,className:"px-3 py-1 rounded-md bg-green-700 text-white",children:"Publish Now"})]}),s.jsx("textarea",{className:"w-full h-[60vh] border rounded-md p-2 font-mono text-sm",value:l,onChange:e=>n(e.target.value),placeholder:"Edit article JSON..."}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Tip: Ensure publishedAt is ISO string. Use published=true to publish. Related quizzes go in relatedQuizzes as slugs."})]})]})}},57311:(e,t,a)=>{"use strict";a.d(t,{WorldClassAdminLayout:()=>j});var s=a(10326),i=a(17577),r=a(86462),l=a(81849),n=a(24319),d=a(36283),o=a(98360),c=a(26754),m=a(24061),h=a(66697),p=a(88307),u=a(83855),x=a(6507),g=a(71810),y=a(3679),f=a(85833);let b=[{name:"Dashboard",href:"/admin",icon:n.Z,current:!0},{name:"Articles",href:"/admin/articles",icon:d.Z,current:!1},{name:"Quizzes",href:"/admin/quizzes",icon:o.Z,current:!1},{name:"Analytics",href:"/admin/analytics",icon:c.Z,current:!1},{name:"Users",href:"/admin/users",icon:m.Z,current:!1},{name:"Research",href:"/admin/research",icon:h.Z,current:!1}];function j({children:e,user:t,activeSection:a="dashboard"}){let[n,d]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(r.M,{children:n&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 lg:hidden",onClick:()=>d(!1),children:s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75"})})}),s.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl lg:shadow-none lg:static lg:inset-0 lg:z-auto lg:w-20 lg:hover:w-64 transition-all duration-300 ease-in-out",children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[s.jsx("div",{className:"flex items-center justify-center h-16 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"MB"})}),s.jsx("span",{className:"hidden lg:block lg:opacity-0 lg:group-hover:opacity-100 transition-opacity font-semibold text-gray-900",children:"MyBeing Admin"})]})}),s.jsx("nav",{className:"flex-1 space-y-1 px-3 py-4",children:b.map(e=>(0,s.jsxs)(l.E.a,{href:e.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ${a===e.name.toLowerCase()?"bg-purple-50 text-purple-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(e.icon,{className:"h-5 w-5 flex-shrink-0"}),s.jsx("span",{className:"ml-3 hidden lg:group-hover:block",children:e.name})]},e.name))}),s.jsx("div",{className:"border-t border-gray-200 p-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-400 to-pink-400 rounded-full flex items-center justify-center text-white font-bold text-sm",children:t.name.charAt(0)}),(0,s.jsxs)("div",{className:"hidden lg:group-hover:block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email})]})]})})]})}),(0,s.jsxs)("div",{className:"lg:pl-20",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsxs)("button",{type:"button",className:"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",onClick:()=>d(!0),children:[s.jsx("span",{className:"sr-only",children:"Open sidebar"}),s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),s.jsx("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:"Search content...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(y.z,{variant:"ghost",size:"sm",className:"hidden sm:flex items-center space-x-2",children:[s.jsx(u.Z,{className:"h-4 w-4"}),s.jsx("span",{children:"New Content"})]}),s.jsx("div",{className:"relative",children:(0,s.jsxs)(y.z,{variant:"ghost",size:"sm",className:"relative",children:[s.jsx(x.Z,{className:"h-5 w-5"}),s.jsx(f.C,{variant:"secondary",className:"absolute -top-1 -right-1 h-4 w-4 p-0 text-xs",children:"3"})]})}),s.jsx(y.z,{variant:"ghost",size:"sm",children:s.jsx(g.Z,{className:"h-4 w-4"})})]})]})})}),s.jsx("main",{className:"flex-1",children:s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e})})})]})]})}},85833:(e,t,a)=>{"use strict";a.d(t,{C:()=>o});var s=a(10326),i=a(17577),r=a(77863);let l={default:"bg-gray-100 text-gray-800 border-gray-200",secondary:"bg-gray-600 text-white border-gray-600",success:"bg-green-100 text-green-800 border-green-200",warning:"bg-yellow-100 text-yellow-800 border-yellow-200",error:"bg-red-100 text-red-800 border-red-200",brand:"bg-lilac-100 text-lilac-800 border-lilac-200",outline:"bg-transparent text-gray-600 border-gray-300",premium:"bg-gradient-to-r from-lilac-100 to-lilac-50 text-lilac-800 border-lilac-200"},n={xs:"px-1.5 py-0.5 text-xs",sm:"px-2 py-1 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-sm"},d={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},o=(0,i.forwardRef)(({className:e,variant:t="default",size:a="sm",rounded:i="md",animated:o=!1,pulse:c=!1,children:m,...h},p)=>s.jsx("span",{ref:p,className:(0,r.cn)("inline-flex items-center font-medium border transition-all duration-200",l[t],n[a],d[i],o&&"hover:scale-105 hover:shadow-sm",c&&"animate-pulse",e),...h,children:m}));o.displayName="Badge"},98360:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},83855:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},88307:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(62881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},22795:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,dynamic:()=>n});var s=a(19510),i=a(3360),r=a(44057);let l=(0,a(68570).createProxy)(String.raw`/Users/niharikasai/mybeing/components/admin/AdminArticles.tsx#default`),n="force-dynamic";function d(){(0,i.kF)();let e={name:"MyBeing Creator",email:process.env.ADMIN_EMAIL||"creator@mybeing.in"};return s.jsx(r.V,{user:e,activeSection:"articles",children:(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Articles"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage your research-backed articles"})]})}),s.jsx(l,{})]})})}},44057:(e,t,a)=>{"use strict";a.d(t,{V:()=>s});let s=(0,a(68570).createProxy)(String.raw`/Users/niharikasai/mybeing/components/admin/WorldClassAdminLayout.tsx#WorldClassAdminLayout`)},3360:(e,t,a)=>{"use strict";a.d(t,{DK:()=>n,YH:()=>d,bc:()=>o,kF:()=>l});var s=a(71615),i=a(58585);let r="admin_auth";function l(){let e=(0,s.cookies)();e.get("admin_token")?.value||(0,i.redirect)("/admin/login")}function n(e){return!!e.cookies.get("admin_token")?.value||"1"===e.cookies.get(r)?.value}function d(){let e=new Headers;return e.append("Set-Cookie",`${r}=; Path=/; HttpOnly; Max-Age=0; SameSite=Lax; Secure`),e}function o(){let e=new Headers;return e.append("Set-Cookie",`${r}=1; Path=/; HttpOnly; SameSite=Lax; Secure; Max-Age=86400`),e}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,1907,4261,4054,9925,8049],()=>a(87407));module.exports=s})();