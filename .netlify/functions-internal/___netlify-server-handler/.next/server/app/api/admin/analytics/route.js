"use strict";(()=>{var e={};e.id=7777,e.ids=[7777],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},4902:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>w,patchFetch:()=>q,requestAsyncStorage:()=>y,routeModule:()=>R,serverHooks:()=>E,staticGenerationAsyncStorage:()=>x});var n={};t.r(n),t.d(n,{GET:()=>v,dynamic:()=>g});var r=t(49303),i=t(88716),a=t(60670),o=t(87070),c=t(45609),p=t(65630),u=t(90455),l=t(35860);let g="force-dynamic",d=p.Km(["7d","30d","90d"]),m={"7d":{pageViews:12543,uniqueUsers:3421,quizCompletions:892,blogViews:2156,aiChatSessions:445,conversions:67,topPages:[{page:"/quizzes/cognitive-dissonance",views:2341},{page:"/blog/understanding-cognitive-patterns",views:1876},{page:"/",views:1654},{page:"/quizzes/stress-patterns",views:1432},{page:"/blog/mindfulness-techniques",views:987}],userSegments:[{segment:"Free Users",count:2890,percentage:84.5},{segment:"Premium Users",count:431,percentage:12.6},{segment:"Admin Users",count:100,percentage:2.9}],conversionFunnel:[{step:"Page Visit",users:3421,conversionRate:100},{step:"Quiz Started",users:1234,conversionRate:36.1},{step:"Quiz Completed",users:892,conversionRate:72.3},{step:"Email Provided",users:445,conversionRate:49.9},{step:"Subscription",users:67,conversionRate:15.1}]},"30d":{pageViews:45231,uniqueUsers:12876,quizCompletions:3421,blogViews:8765,aiChatSessions:1876,conversions:234,topPages:[{page:"/quizzes/cognitive-dissonance",views:8765},{page:"/blog/understanding-cognitive-patterns",views:6543},{page:"/",views:5432},{page:"/quizzes/stress-patterns",views:4321},{page:"/blog/mindfulness-techniques",views:3210}],userSegments:[{segment:"Free Users",count:10987,percentage:85.3},{segment:"Premium Users",count:1543,percentage:12},{segment:"Admin Users",count:346,percentage:2.7}],conversionFunnel:[{step:"Page Visit",users:12876,conversionRate:100},{step:"Quiz Started",users:4567,conversionRate:35.5},{step:"Quiz Completed",users:3421,conversionRate:74.9},{step:"Email Provided",users:1876,conversionRate:54.8},{step:"Subscription",users:234,conversionRate:12.5}]},"90d":{pageViews:134567,uniqueUsers:34521,quizCompletions:9876,blogViews:23456,aiChatSessions:5432,conversions:678,topPages:[{page:"/quizzes/cognitive-dissonance",views:23456},{page:"/blog/understanding-cognitive-patterns",views:18765},{page:"/",views:15432},{page:"/quizzes/stress-patterns",views:12345},{page:"/blog/mindfulness-techniques",views:9876}],userSegments:[{segment:"Free Users",count:29876,percentage:86.5},{segment:"Premium Users",count:3987,percentage:11.5},{segment:"Admin Users",count:658,percentage:1.9}],conversionFunnel:[{step:"Page Visit",users:34521,conversionRate:100},{step:"Quiz Started",users:12345,conversionRate:35.8},{step:"Quiz Completed",users:9876,conversionRate:80},{step:"Email Provided",users:5432,conversionRate:55},{step:"Subscription",users:678,conversionRate:12.5}]}};async function v(e){try{await l.Yy.check(e,10);let s=await (0,c.getServerSession)(u.L);if(!s||s.user?.email!==process.env.OWNER_EMAIL)return new o.NextResponse(JSON.stringify({success:!1,error:"Unauthorized",code:"UNAUTHORIZED"}),{status:401,headers:{"Content-Type":"application/json","Cache-Control":"no-store, max-age=0"}});let{searchParams:t}=new URL(e.url),n=t.get("range")||"7d",r=d.safeParse(n);if(!r.success)return new o.NextResponse(JSON.stringify({success:!1,error:"Invalid date range",code:"INVALID_RANGE",details:r.error.format()}),{status:400,headers:{"Content-Type":"application/json","Cache-Control":"no-store, max-age=0"}});let i=m[r.data];return new o.NextResponse(JSON.stringify({success:!0,data:i}),{headers:{"Content-Type":"application/json","Cache-Control":"no-store, max-age=0","X-Content-Type-Options":"nosniff"}})}catch(e){if(console.error("Analytics API error:",e),e.message?.includes("Rate limit exceeded"))return new o.NextResponse(JSON.stringify({success:!1,error:"Too many requests",code:"RATE_LIMIT_EXCEEDED",message:"Please try again later."}),{status:429,headers:{"Content-Type":"application/json","Retry-After":"60","Cache-Control":"no-store, max-age=0"}});return new o.NextResponse(JSON.stringify({success:!1,error:"Failed to fetch analytics data",code:"INTERNAL_SERVER_ERROR",message:void 0}),{status:500,headers:{"Content-Type":"application/json","Cache-Control":"no-store, max-age=0"}})}}let R=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/analytics/route",pathname:"/api/admin/analytics",filename:"route",bundlePath:"app/api/admin/analytics/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/admin/analytics/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:x,serverHooks:E}=R,w="/api/admin/analytics/route";function q(){return(0,a.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:x})}},90455:(e,s,t)=>{t.d(s,{L:()=>a});var n=t(77234),r=t(53797);let i=[];process.env.GOOGLE_CLIENT_ID&&process.env.GOOGLE_CLIENT_SECRET&&i.push((0,n.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})),process.env.DEV_CREDENTIALS_PASSWORD&&i.push((0,r.Z)({name:"Dev Login",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){let s=e?.email?.toString()||"",t=e?.password?.toString()||"";return s&&t&&t===process.env.DEV_CREDENTIALS_PASSWORD?{id:s,email:s,name:s.split("@")[0]}:null}}));let a={providers:i,secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},callbacks:{session:async({session:e})=>e}}},35860:(e,s,t)=>{t.d(s,{Yy:()=>i});var n=t(10138);function r(e){let s=new n.z({max:e?.uniqueTokenPerInterval||500,ttl:e?.interval||6e4});return{check:(e,t,n)=>{let r=e.ip||"127.0.0.1",i=n||r,a=s.get(i)||[0];a[0]+=1,s.set(i,a);let o=a[0],c=o>t,p=new Headers;if(p.set("X-RateLimit-Limit",t.toString()),p.set("X-RateLimit-Remaining",c?"0":(t-o).toString()),c){let e=Math.ceil((s.getRemainingTTL(i)||0)/1e3);throw p.set("Retry-After",e.toString()),Error(`Rate limit exceeded. Try again in ${e} seconds.`)}return{limit:t,remaining:t-o,success:!0}}}}let i=r({interval:6e4,uniqueTokenPerInterval:500});r({interval:6e4,uniqueTokenPerInterval:1e3})}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),n=s.X(0,[8948,5972,2830,5630,138],()=>t(4902));module.exports=n})();