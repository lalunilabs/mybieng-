"use strict";(()=>{var e={};e.id=7256,e.ids=[7256],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},15003:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>y,staticGenerationAsyncStorage:()=>x});var r={};n.r(r),n.d(r,{DELETE:()=>m,GET:()=>c,POST:()=>d,dynamic:()=>A});var a=n(49303),s=n(88716),i=n(60670),o=n(87070),u=n(57708),l=n(3360),p=n(4745);async function c(e){if(!(0,l.DK)(e))return o.NextResponse.json({error:"Unauthorized"},{status:401});let t=(0,p.Hf)();return o.NextResponse.json({items:t})}async function d(e){if(!(0,l.DK)(e))return o.NextResponse.json({error:"Unauthorized"},{status:401});let t=await e.json().catch(()=>null);if(!t||!t.slug||!t.title||!Array.isArray(t.questions)||!Array.isArray(t.bands))return o.NextResponse.json({error:"Invalid payload"},{status:400});try{(0,p.h6)(t);try{let e=process.env.ALGOLIA_APP_ID,n=process.env.ALGOLIA_ADMIN_API_KEY,r=process.env.ALGOLIA_INDEX_NAME;if(e&&n&&r){let a=`https://${e}.algolia.net/1/indexes/${encodeURIComponent(r)}/${encodeURIComponent("quiz:"+t.slug)}`,s={objectID:"quiz:"+t.slug,docType:"quiz",slug:t.slug,title:t.title,excerpt:t.description||"",tags:t.tags||[],imageUrl:t.imageUrl||"",publishedAt:t.publishedAt||""};await fetch(a,{method:"PUT",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":e,"X-Algolia-API-Key":n},body:JSON.stringify(s)})}}catch{}try{(0,u.revalidatePath)("/quizzes"),(0,u.revalidatePath)(`/quizzes/${t.slug}`),(0,u.revalidatePath)("/sitemap.xml")}catch{}return o.NextResponse.json({ok:!0})}catch(e){return o.NextResponse.json({error:e?.message||"Failed to save"},{status:500})}}async function m(e){if(!(0,l.DK)(e))return o.NextResponse.json({error:"Unauthorized"},{status:401});let{searchParams:t}=new URL(e.url),n=t.get("slug");if(!n)return o.NextResponse.json({error:"slug is required"},{status:400});(0,p.y3)(n);try{let e=process.env.ALGOLIA_APP_ID,t=process.env.ALGOLIA_ADMIN_API_KEY,r=process.env.ALGOLIA_INDEX_NAME;if(e&&t&&r){let a=`https://${e}.algolia.net/1/indexes/${encodeURIComponent(r)}/${encodeURIComponent("quiz:"+n)}`;await fetch(a,{method:"DELETE",headers:{"X-Algolia-Application-Id":e,"X-Algolia-API-Key":t}})}}catch{}try{(0,u.revalidatePath)("/quizzes"),(0,u.revalidatePath)(`/quizzes/${n}`),(0,u.revalidatePath)("/sitemap.xml")}catch{}return o.NextResponse.json({ok:!0})}let A="force-dynamic",g=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/quizzes/route",pathname:"/api/admin/quizzes",filename:"route",bundlePath:"app/api/admin/quizzes/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/admin/quizzes/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:y}=g,v="/api/admin/quizzes/route";function q(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:x})}},3360:(e,t,n)=>{n.d(t,{DK:()=>o,YH:()=>u,bc:()=>l,kF:()=>i});var r=n(71615),a=n(58585);let s="admin_auth";function i(){let e=(0,r.cookies)();e.get("admin_token")?.value||(0,a.redirect)("/admin/login")}function o(e){return!!e.cookies.get("admin_token")?.value||"1"===e.cookies.get(s)?.value}function u(){let e=new Headers;return e.append("Set-Cookie",`${s}=; Path=/; HttpOnly; Max-Age=0; SameSite=Lax; Secure`),e}function l(){let e=new Headers;return e.append("Set-Cookie",`${s}=1; Path=/; HttpOnly; SameSite=Lax; Secure; Max-Age=86400`),e}}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[8948,5972,2654,4745],()=>n(15003));module.exports=r})();