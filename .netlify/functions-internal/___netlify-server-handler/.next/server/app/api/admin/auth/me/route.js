"use strict";(()=>{var e={};e.id=8384,e.ids=[8384],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},4101:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var n={};t.r(n),t.d(n,{GET:()=>c,dynamic:()=>l});var a=t(49303),i=t(88716),s=t(60670),o=t(87070),u=t(6659);let l="force-dynamic";async function c(e){try{let e=await (0,u.vN)();if(!e)return o.NextResponse.json({error:"Not authenticated"},{status:401,headers:{"Cache-Control":"no-store"}});return new o.NextResponse(JSON.stringify({user:{id:e.id,email:e.email,name:e.name,role:e.role,permissions:e.permissions,lastLogin:e.lastLogin,avatar:e.avatar}}),{headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}catch(e){return console.error("Admin auth check error:",e),o.NextResponse.json({error:"Internal server error"},{status:500,headers:{"Cache-Control":"no-store"}})}}let d=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/auth/me/route",pathname:"/api/admin/auth/me",filename:"route",bundlePath:"app/api/admin/auth/me/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/admin/auth/me/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:h}=d,f="/api/admin/auth/me/route";function g(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},6659:(e,r,t)=>{t.d(r,{Wg:()=>h,p$:()=>p,v9:()=>m,vN:()=>f});var n=t(71615),a=t(41482),i=t.n(a),s=t(84770);let o={super_admin:["users.read","users.write","users.delete","content.read","content.write","content.delete","subscriptions.read","subscriptions.write","ai_chat.read","ai_chat.moderate","system.read","system.write","analytics.read","reports.read","reports.export","settings.read","settings.write","security.read","security.write","admin.manage"]},u=process.env.OWNER_EMAIL||"",l=process.env.ADMIN_PASSWORD||"",c=Number(process.env.ADMIN_SESSION_TIMEOUT||"86400"),d=Number.isFinite(c)&&c>0?1e3*c:864e5;class p extends Error{constructor(e,r){super(e),this.code=r,this.name="AdminAuthError"}}async function m(e,r){if(!u||!l)throw new p("Admin not configured","ADMIN_NOT_CONFIGURED");let t=Buffer.from(e),n=Buffer.from(u),a=Buffer.from(r),c=Buffer.from(l),m=t.length===n.length&&(0,s.timingSafeEqual)(t,n),h=a.length===c.length&&(0,s.timingSafeEqual)(a,c);if(!m||!h)throw new p("Invalid credentials","INVALID_CREDENTIALS");let f={id:"admin_owner",email:u,name:u.split("@")[0],role:"super_admin",permissions:o.super_admin,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString()},g=i().sign({userId:f.id,email:f.email,role:f.role},function(){let e=process.env.ADMIN_JWT_SECRET;if(!e||e.length<16)throw new p("Admin not configured","ADMIN_NOT_CONFIGURED");return e}(),{expiresIn:`${Math.floor(d/1e3)}s`});return{user:f,token:g,expiresAt:new Date(Date.now()+d).toISOString()}}async function h(e){try{let r=process.env.ADMIN_JWT_SECRET;if(!r)return null;let t=i().verify(e,r);if(!t?.email||t.email!==u)return null;return{id:"admin_owner",email:u,name:u.split("@")[0],role:"super_admin",permissions:o.super_admin,createdAt:"2023-01-01T00:00:00Z",lastLogin:new Date().toISOString()}}catch(e){return null}}async function f(){try{let e=(0,n.cookies)(),r=e.get("admin_token")?.value;if(!r)return null;return await h(r)}catch(e){return null}}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[8948,5972,4261],()=>t(4101));module.exports=n})();