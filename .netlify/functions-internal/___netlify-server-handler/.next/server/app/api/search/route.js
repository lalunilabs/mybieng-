"use strict";(()=>{var e={};e.id=280,e.ids=[280],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},70731:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>m,patchFetch:()=>A,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var r={};i.r(r),i.d(r,{GET:()=>u});var s=i(49303),a=i(88716),l=i(60670),o=i(87070),p=i(4745);function n(e){return(e||"").toLowerCase()}async function u(e){let{searchParams:t}=new URL(e.url),i=(t.get("q")||"").trim(),r=Math.max(1,Math.min(parseInt(t.get("limit")||"10",10)||10,20)),s=(t.get("type")||"").trim(),a="article"===s||"quiz"===s?s:void 0,l=process.env.ALGOLIA_APP_ID,u=process.env.ALGOLIA_SEARCH_API_KEY,c=process.env.ALGOLIA_INDEX_NAME;try{if(l&&u&&c){let e=`https://${l}-dsn.algolia.net/1/indexes/${encodeURIComponent(c)}/query`,t={query:i,hitsPerPage:r};a&&(t.filters=`docType:${a}`);let s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json","X-Algolia-Application-Id":l,"X-Algolia-API-Key":u},body:JSON.stringify(t),cache:"no-store"});if(!s.ok){let e=await s.text();throw Error(`Algolia error ${s.status}: ${e}`)}let p=((await s.json()).hits||[]).map(e=>({id:e.objectID||e.id,docType:e.docType||e.type||"article",slug:e.slug,title:e.title,excerpt:e.excerpt||e.description||"",tags:e.tags||[],imageUrl:e.imageUrl||"",publishedAt:e.publishedAt||""}));return o.NextResponse.json({items:p})}}catch(e){}let d=function(e,t,i){let r=Date.now(),s=(0,p.y8)().filter(e=>!1!==e.published&&e.publishedAt.getTime()<=r).map(e=>({id:`article:${e.slug}`,docType:"article",slug:e.slug,title:e.title,excerpt:e.excerpt||e.metaDescription||"",tags:e.tags||[],imageUrl:e.imageUrl||"",publishedAt:e.publishedAt.toISOString()})),a=(0,p.Hf)().filter(e=>!1!==e.published&&(!e.publishedAt||new Date(e.publishedAt).getTime()<=r)).map(e=>({id:`quiz:${e.slug}`,docType:"quiz",slug:e.slug,title:e.title,excerpt:e.description||"",tags:e.tags||[],imageUrl:e.imageUrl||"",publishedAt:e.publishedAt?new Date(e.publishedAt).toISOString():""})),l=n(e),o=[...s,...a];i&&(o=o.filter(e=>e.docType===i));let u=(o=o.filter(e=>!l||n(e.title).includes(l)||n(e.excerpt).includes(l)||(e.tags||[]).some(e=>n(e).includes(l)))).map(e=>{let t=0;n(e.title).includes(l)&&(t+=3),(e.tags||[]).some(e=>n(e).includes(l))&&(t+=2),n(e.excerpt).includes(l)&&(t+=1);let i=e.publishedAt?Date.parse(e.publishedAt):0;return{x:e,score:t+=Math.min(2,Date.now()-i<7776e6?1:0)}});return u.sort((e,t)=>t.score-e.score),u.slice(0,t).map(e=>e.x)}(i,r,a);return o.NextResponse.json({items:d})}let c=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/search/route",pathname:"/api/search",filename:"route",bundlePath:"app/api/search/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/search/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:h}=c,m="/api/search/route";function A(){return(0,l.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[8948,5972,4745],()=>i(70731));module.exports=r})();