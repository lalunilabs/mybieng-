"use strict";(()=>{var e={};e.id=4712,e.ids=[4712],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29789:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>f,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g});var s={};i.r(s),i.d(s,{POST:()=>u});var n=i(49303),a=i(88716),o=i(60670),r=i(87070),l=i(96458);let d=new Map,c=new Map;function p(e,t){let i=Date.now(),s=e.get(t);return!s||i>s.resetAt?(e.set(t,{count:1,resetAt:i+6e5}),{allowed:!0,remaining:4}):s.count>=5?{allowed:!1,remaining:0,resetAt:s.resetAt}:(s.count+=1,{allowed:!0,remaining:5-s.count})}async function u(e){try{let{email:t,quizId:i,quizTitle:s,score:n,maxScore:a,band:o}=await e.json();if(!t||!i||!s||"number"!=typeof n||"number"!=typeof a)return r.NextResponse.json({error:"Invalid payload"},{status:400});let u=(e.headers.get("x-forwarded-for")||"").split(",")[0].trim()||"unknown";if(!p(d,u).allowed)return r.NextResponse.json({error:"Too many requests. Please try again later."},{status:429});let m=t.toLowerCase();if(!p(c,m).allowed)return r.NextResponse.json({error:"Too many requests for this email. Please try again later."},{status:429});let h="http://localhost:3000",g=`${h}/reports/${encodeURIComponent(i)}`,y=(0,l.tF)(n,a),f=o||y?.label||"Your result",v=y?.advice||"We will send you the detailed interpretation, patterns, and next steps.",b=(0,l.D9)(i);if(b?.bands?.length){let e=b.bands.find(e=>e.label.toLowerCase()===f.toLowerCase());e?.advice&&(v=e.advice)}let x=`${s} — Your Report`,w=process.env.EMAIL_FROM||"no-reply@mybeing.in",k=`Summary: ${f}`,I=function(e){let t=(e||"").toLowerCase();return t.includes("cognitive")||t.includes("dissonance")?["Where am I rationalizing a values conflict this week?","What is one small action to realign without major friction?","What value do I want to honor in a tough situation?"]:t.includes("stress")?["Which signal shows up first when stress builds for me?","What is one lever (sleep, movement, breaks) I can steady this week?","What is a small stress amplifier I can reduce for 7 days?"]:["What patterns should I pay attention to next week?","What is one small change that could have outsized benefits?","Which habit can I try for 7 days to test a better pattern?"]}(b?.slug),S=`${h}/apple-touch-icon.png`,A=`
      <!doctype html>
      <html>
        <head>
          <meta name="viewport" content="width=device-width, initial-scale=1" />
          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
          <title>${x}</title>
          <style>
            body { background: #f8fafc; color: #0f172a; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 24px; }
            .card { max-width: 640px; margin: 0 auto; background: #ffffff; border: 1px solid #e5e7eb; border-radius: 16px; padding: 24px; }
            .h1 { font-size: 20px; margin: 0 0 8px; font-weight: 700; }
            .muted { color: #475569; }
            .pill { display:inline-block; background:#ede9fe; color:#6d28d9; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:600; }
            .btn { display:inline-block; background:#6d28d9; color:#fff !important; text-decoration:none; padding:10px 16px; border-radius:12px; font-weight:600; }
            .footer { max-width: 640px; margin: 12px auto; color:#64748b; font-size:12px; }
            .brand { display:flex; align-items:center; gap:10px; margin-bottom: 12px; }
            .brand img { width: 28px; height: 28px; border-radius: 6px; }
            .brand-name { font-weight: 800; letter-spacing: 0.2px; }
            ul { padding-left: 18px; }
          </style>
        </head>
        <body>
          <span style="display:none !important; visibility:hidden; opacity:0; height:0; width:0; overflow:hidden;">${k}</span>
          <div class="card">
            <div class="brand">
              <img src="${S}" alt="MyBeing" />
              <div class="brand-name">MyBeing</div>
            </div>
            <div class="pill">${f}</div>
            <h1 class="h1">${s}</h1>
            <p class="muted">Here is a brief summary of your result. Your detailed report with interpretation, patterns, and next steps is ready.</p>
            <p>${v}</p>
            <p class="muted">When you’re ready, view your report and discuss it with the AI companion.</p>
            <p>
              <a class="btn" href="${g}" target="_blank" rel="noopener noreferrer">View your report</a>
            </p>
            <div style="height:12px"></div>
            <div>
              <div class="muted" style="font-weight:600; margin-bottom:4px;">Suggested questions for the AI</div>
              <ul>
                ${I.map(e=>`<li>${e}</li>`).join("")}
              </ul>
            </div>
          </div>
          <div class="footer">
            You’re receiving this because you requested your report from MyBeing. If this wasn’t you, you can ignore this email.
          </div>
        </body>
      </html>
    `,q=!1,R=[],M=Function("m","return import(m)");if(process.env.RESEND_API_KEY)try{let e=await M("resend"),i=e?.Resend;if(i){let e=new i(process.env.RESEND_API_KEY),s=await e.emails.send({from:w,to:t,subject:x,html:A});s?.id||s?.data?.id?q=!0:s?.error&&R.push(`Resend: ${s.error?.message||"unknown error"}`)}else R.push("Resend module missing Resend export")}catch(e){R.push(`Resend import/send failed: ${e?.message||e}`)}if(!q&&process.env.SENDGRID_API_KEY)try{let e=await M("@sendgrid/mail"),i=e?.default||e;if(i?.setApiKey&&i?.send){i.setApiKey(process.env.SENDGRID_API_KEY);let e=await i.send({to:t,from:w,subject:x,html:A});Array.isArray(e)&&(e[0]?.statusCode||0)>=200&&300>(e[0]?.statusCode||0)?q=!0:R.push("SendGrid returned unexpected response")}else R.push("SendGrid module missing expected exports")}catch(e){R.push(`SendGrid import/send failed: ${e?.message||e}`)}return q||console.info("[email-results] queued (no provider configured)",{email:t,quizId:i,quizTitle:s,score:n,maxScore:a,band:o,errors:R}),r.NextResponse.json({ok:!0,sent:q,providerErrors:R})}catch(e){return console.error("POST /api/quiz/email-results error",e),r.NextResponse.json({error:"Server error"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/quiz/email-results/route",pathname:"/api/quiz/email-results",filename:"route",bundlePath:"app/api/quiz/email-results/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/quiz/email-results/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:y}=m,f="/api/quiz/email-results/route";function v(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:g})}},96458:(e,t,i)=>{i.d(t,{D9:()=>n,ei:()=>s,tF:()=>a});let s=[{slug:"cognitive-dissonance",title:"The Mental Tug-of-War (Cognitive Dissonance)",description:"Detect where your values and actions are out of sync across five patterns: instant justification, gradual belief shift, selective evidence, identity protection, and social reality distortion.",isPaid:!0,price:45,published:!0,publishedAt:"2025-08-01T00:00:00.000Z",tags:["cognitive dissonance","values","behavior","identity","justification","patterns"],metaTitle:"The Mental Tug-of-War: Cognitive Dissonance Assessment",metaDescription:"Spot contradictions between values and actions across 5 patterns. No right/wrong answers—use this assessment to recognize dissonance cues and choose small alignment steps.",keywords:["cognitive dissonance","values vs actions","instant justification","identity protection","selective evidence","self-discovery"],canonicalUrl:"/quizzes/cognitive-dissonance",ogImage:"",robots:"index,follow",questions:[{id:"cd1",text:"I quickly explain away choices that conflict with my values.",type:"likert"},{id:"cd2",text:"When I feel tension, I tell myself it was unavoidable.",type:"likert"},{id:"cd3",text:"Over time, I convince myself that a once-important value matters less.",type:"likert"},{id:"cd4",text:"I reframe past decisions to feel more consistent with who I am.",type:"likert"},{id:"cd5",text:"I look for information that supports my decision and ignore the rest.",type:"likert"},{id:"cd6",text:"I spend more time with people who validate my choices.",type:"likert"},{id:"cd7",text:"I feel threatened when feedback challenges a core part of my identity.",type:"likert"},{id:"cd8",text:"I defend my choices to protect how I see myself.",type:"likert"},{id:"cd9",text:"I justify actions by saying everyone around me does the same.",type:"likert"},{id:"cd10",text:"I downplay contradictions if my group supports the behavior.",type:"likert"}],bands:[{min:10,max:20,label:"Low dissonance",advice:"You generally act in alignment with your values. Keep reflecting on decisions and use that alignment as a strength."},{min:21,max:35,label:"Moderate dissonance",advice:"You may be managing occasional tensions by rationalizing or shifting beliefs. Choose one area to realign with a small, testable action."},{min:36,max:50,label:"High dissonance",advice:"You often experience value–behavior gaps. Map the biggest friction point, identify one value to honor this week, and remove a small obstacle to acting on it."}]},{slug:"stress-patterns",title:"Stress Patterns Check-in",description:"Spot recurring stress signals across sleep, energy, focus, mood, and social strain.",isPaid:!0,price:35,published:!0,publishedAt:"2025-08-10T00:00:00.000Z",tags:["stress","energy","sleep","focus","mood","patterns"],metaTitle:"Stress Patterns Check-in: Daily Signals Overview",metaDescription:"Identify stress signals across sleep, energy, focus, mood, and social strain. Quick check-in designed for practical insight and small adjustments.",keywords:["stress patterns","sleep","energy levels","focus","mood","self-assessment"],canonicalUrl:"/quizzes/stress-patterns",ogImage:"",robots:"index,follow",questions:[{id:"sp1",text:"My sleep is disrupted or unrefreshing.",type:"likert"},{id:"sp2",text:"My energy crashes during the day.",type:"likert"},{id:"sp3",text:"It is hard to focus or finish tasks.",type:"likert"},{id:"sp4",text:"I feel more irritable or on edge than usual.",type:"likert"},{id:"sp5",text:"I withdraw from people or avoid conversations.",type:"likert"},{id:"sp6",text:"Small problems feel overwhelming.",type:"likert"},{id:"sp7",text:"I rely on short-term relief (scrolling, snacking, etc.).",type:"likert"},{id:"sp8",text:"I notice physical tension (jaw, shoulders, stomach).",type:"likert"}],bands:[{min:8,max:16,label:"Low stress pattern load",advice:"You have manageable signals. Keep the basics steady: sleep window, movement, and one daily reset ritual."},{min:17,max:28,label:"Moderate stress pattern load",advice:"Pick one reliable lever (sleep, movement, or focused breaks). Reduce one stress amplifier (late caffeine, late screens, or constant notifications)."},{min:29,max:40,label:"High stress pattern load",advice:"Prioritize recovery. Create a wind-down routine, schedule a supportive conversation, and remove one commitment to free up capacity."}]},{slug:"self-awareness-mixed",title:"Self-Awareness Check (Mixed Format)",description:"A demonstration quiz using different question types to explore self-awareness patterns.",questions:[{id:"sa1",text:"I regularly reflect on my emotions and reactions.",type:"likert"},{id:"sa2",text:"Do you keep a journal or practice regular self-reflection?",type:"yes_no"},{id:"sa3",text:"What time of day do you feel most energetic?",type:"multiple_choice",options:["Early morning","Mid-morning","Afternoon","Evening","Late night"]},{id:"sa4",text:"I notice patterns in my behavior across different situations.",type:"likert"},{id:"sa5",text:"Describe a recent situation where you learned something new about yourself:",type:"text_input",placeholder:"Share your experience and what you discovered..."},{id:"sa6",text:"Do you actively seek feedback from others about your behavior?",type:"yes_no"},{id:"sa7",text:"Which best describes your approach to personal growth?",type:"multiple_choice",options:["Structured learning (books, courses)","Experiential learning (trying new things)","Social learning (conversations, mentors)","Reflective learning (journaling, meditation)","Mixed approach"]}],bands:[{min:4,max:8,label:"Developing awareness",advice:"You're building self-awareness foundations. Focus on one consistent reflection practice and seek regular feedback."},{min:9,max:12,label:"Growing awareness",advice:"You have good self-awareness habits. Deepen your practice by exploring patterns and seeking diverse perspectives."},{min:13,max:16,label:"Strong awareness",advice:"You demonstrate strong self-awareness. Use this foundation to help others and continue challenging your assumptions."}]}];function n(e){return s.find(t=>t.slug===e)}function a(e,t){let i=e/t*100;return i<=40?{min:10,max:20,label:"Low dissonance",advice:"You generally act in alignment with your values. Keep reflecting on decisions and use that alignment as a strength."}:i<=70?{min:21,max:35,label:"Moderate dissonance",advice:"You may be managing occasional tensions by rationalizing or shifting beliefs. Choose one area to realign with a small, testable action."}:{min:36,max:50,label:"High dissonance",advice:"You often experience value–behavior gaps. Map the biggest friction point, identify one value to honor this week, and remove a small obstacle to acting on it."}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),s=t.X(0,[8948,5972],()=>i(29789));module.exports=s})();