"use strict";(()=>{var e={};e.id=4445,e.ids=[4445],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},49906:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>q,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c});var o=r(49303),n=r(88716),i=r(60670),a=r(87070),u=r(30372),p=r(28841);async function c(e,{params:t}){try{let{slug:r}=t,{searchParams:s}=new URL(e.url),o=s.get("range")||"7d",n=(0,p.D9)(r);if(!n)return a.NextResponse.json({error:"Quiz not found"},{status:404});let i=(0,u.fr)(o),c=i.quizBreakdown[r]||0,l=await (0,u.Vq)(r),d=i.totalResponses,m=Object.entries(l.scoreDistribution).map(([e,t])=>({band:e,count:t,percentage:d>0?t/d*100:0})),g={quizTitle:n.title,quizSlug:r,totalCompletions:c,averageScore:l.averageScore,scoreDistribution:l.scoreDistribution,bandDistribution:m,completionTrend:i.timeAnalytics.dailyCompletions,questionAnalytics:n.questions.map(e=>{let t=i.responsePatterns.find(t=>t.questionId===e.id);return{questionId:e.id,questionText:e.text,questionType:e.type,averageResponse:t?.averageScore||0,responseDistribution:t?.responseDistribution||{},commonPatterns:t?.commonPatterns||[]}}),improvementSuggestions:l.improvementSuggestions,commonPatterns:l.commonResponsePatterns};return a.NextResponse.json(g)}catch(e){return console.error(`Quiz analytics error for ${t.slug}:`,e),a.NextResponse.json({error:"Failed to fetch quiz analytics"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/research/quiz/[slug]/route",pathname:"/api/research/quiz/[slug]",filename:"route",bundlePath:"app/api/research/quiz/[slug]/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/research/quiz/[slug]/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g}=l,q="/api/research/quiz/[slug]/route";function h(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,5972,5278],()=>r(49906));module.exports=s})();