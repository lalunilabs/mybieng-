"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},92048:e=>{e.exports=require("fs")},55315:e=>{e.exports=require("path")},54524:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var r={};i.r(r),i.d(r,{POST:()=>p});var s=i(49303),n=i(88716),o=i(60670),a=i(87070),u=i(26729),c=i(65630),l=i(99186);async function p(e){try{let t;try{t=await e.json()}catch{return a.NextResponse.json({error:"Invalid JSON in request body"},{status:400})}let i=c.Ry({sessionId:c.Z_().min(1).max(200),message:c.Z_().min(1).max(1e3),conversationHistory:c.IX(c.Ry({role:c.Km(["user","assistant"]),content:c.Z_().min(1).max(1e3)})).max(20).optional()}).safeParse(t);if(!i.success)return a.NextResponse.json({error:"Invalid request",details:i.error.flatten()},{status:400});let{sessionId:r,message:s,conversationHistory:n=[]}=i.data,o=(0,l.Z$)(s),p=await (0,u.X)(o,{score:65,band:"Moderate Dissonance",bandDescription:"Some tension exists between your beliefs and behaviors.",keyInsights:[{pattern:"Justification Patterns",description:"You show moderate tendency to rationalize decisions that conflict with your values.",actionableAdvice:'Practice the "pause and reflect" technique when you notice quick justifications.',relatedContent:["mental-tug-of-war-cognitive-dissonance"]}],personalizedMessage:"Your cognitive dissonance score suggests some normal tension between ideals and reality.",recommendedActions:["Keep a brief daily log of value-action conflicts",'Practice the "values check" before major decisions',"Experiment with one small behavior change that aligns with your values"],nextSteps:["Take the Stress Patterns quiz","Read our blog post on cognitive dissonance","Set up weekly reflection time"]},n);return new a.NextResponse(JSON.stringify({response:p,sessionId:r}),{status:200,headers:{"Content-Type":"application/json","Cache-Control":"no-store"}})}catch(e){return console.error("Chat API error:",e),a.NextResponse.json({error:"Failed to generate response"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/chat/route",pathname:"/api/chat",filename:"route",bundlePath:"app/api/chat/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/chat/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:g,serverHooks:h}=m,x="/api/chat/route";function f(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},99186:(e,t,i)=>{i.d(t,{$G:()=>a,Cs:()=>u,R7:()=>g,Z$:()=>c,oJ:()=>m,uS:()=>p,uk:()=>l});var r=i(65630),s=i(29489),n=i(96458),o=i(18147);let a=r.Ry({message:r.Z_().min(1).max(1e3),mode:r.Km(["quiz-results","general","subscription"]),context:r.Ry({quizResults:r.Ry({quizTitle:r.Z_(),score:r.Rx(),maxScore:r.Rx(),band:r.Ry({label:r.Z_(),description:r.Z_(),advice:r.Z_()}),answers:r.IM(r.Z_(),r.Yj())}).optional(),userSubscription:r.Ry({isSubscribed:r.O7(),plan:r.Km(["free","premium"]),freeQuizzesUsed:r.Rx().optional(),premiumArticlesUsed:r.Rx().optional()}).optional(),conversationHistory:r.IX(r.Ry({role:r.Km(["user","assistant"]),content:r.Z_()})).optional()})});function u(e){let t=e?.freeQuizzesUsed||0,i=e?.premiumArticlesUsed||0;return{freeQuizzesLimit:2,premiumArticlesLimit:3,freeQuizzesUsed:t,premiumArticlesUsed:i,freeQuizzesRemaining:Math.max(0,2-t),premiumArticlesRemaining:Math.max(0,3-i)}}function c(e){return e.trim().replace(/\s+/g," ").substring(0,1e3)}function l(e){return{quizzes:n.ei.filter(t=>t.title!==e).slice(0,2).map(e=>({slug:e.slug,title:e.title,description:e.description,price:e.price,isFree:!e.price||e.price<50})),blogs:o.Z.filter(t=>t.relatedQuizzes?.some(t=>e.toLowerCase().includes(t.toLowerCase()))||t.tags.some(t=>e.toLowerCase().includes(t))).slice(0,2).map(e=>({slug:e.slug,title:e.title,excerpt:e.excerpt,isPremium:e.isPremium}))}}function p(e){let t=u(e);return n.ei.slice(0,3).map(e=>({slug:e.slug,title:e.title,description:e.description,price:e.price,isFree:t.freeQuizzesRemaining>0&&(!e.price||e.price<50)}))}function m(e){let t=u(e);return[...o.Z.filter(e=>e.isPremium).slice(0,t.premiumArticlesRemaining).map(e=>({slug:e.slug,title:e.title,excerpt:e.excerpt,isPremium:e.isPremium,isFree:!0})),...o.Z.filter(e=>!e.isPremium).slice(0,2).map(e=>({slug:e.slug,title:e.title,excerpt:e.excerpt,isPremium:!1}))].slice(0,3)}r.Ry({rating:r.Rx().min(1).max(5),comment:r.Z_().max(500).optional(),quizSlug:r.Z_().optional()});class d extends Error{constructor(e,t,i=400){super(e),this.code=t,this.statusCode=i,this.name="ChatError"}}function g(e){return e instanceof d?{error:e.message,statusCode:e.statusCode}:e instanceof s.j?{error:"Invalid request format",statusCode:400}:(console.error("Unexpected chat error:",e),{error:"An unexpected error occurred",statusCode:500})}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[8948,5972,5630,6458,6729],()=>i(54524));module.exports=r})();