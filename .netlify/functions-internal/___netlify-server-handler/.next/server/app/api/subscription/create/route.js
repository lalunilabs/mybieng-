"use strict";(()=>{var e={};e.id=7001,e.ids=[7001],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14556:(e,t,i)=>{i.r(t),i.d(t,{originalPathname:()=>p,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>o,serverHooks:()=>m,staticGenerationAsyncStorage:()=>z});var r={};i.r(r),i.d(r,{POST:()=>d});var s=i(49303),u=i(88716),n=i(60670),c=i(87070),a=i(86287);async function d(e){try{let{email:t}=await e.json();if(!t)return c.NextResponse.json({error:"Email required"},{status:400});let i=(0,a.XW)(t);return c.NextResponse.json({success:!0,subscription:{id:i.id,plan:i.plan,status:i.status,endDate:i.endDate}})}catch(e){return console.error("Subscription creation error:",e),c.NextResponse.json({error:"Internal server error"},{status:500})}}let o=new s.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/subscription/create/route",pathname:"/api/subscription/create",filename:"route",bundlePath:"app/api/subscription/create/route"},resolvedPagePath:"/Users/niharikasai/mybeing/app/api/subscription/create/route.ts",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:z,serverHooks:m}=o,p="/api/subscription/create/route";function f(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:z})}},86287:(e,t,i)=>{i.d(t,{C2:()=>h,EO:()=>L,ER:()=>v,F3:()=>q,F6:()=>m,FR:()=>p,HA:()=>A,XW:()=>d,Xt:()=>Q,Z1:()=>g,cv:()=>z,gL:()=>D,m2:()=>P,qZ:()=>f,rz:()=>l,vQ:()=>U});let r=[],s=[],u={price:32,premiumArticlesLimit:3,freeQuizzesLimit:2,freeQuizValueCap:50,articleDiscountPercent:30,quizFreeAccess:!1,quizDiscountPercent:20,discountedQuizzesLimit:3},n={quiz:50,article:50};function c(e){let t={id:C(),email:e,likedArticles:[],userDiscounts:[]};return s.push(t),t}function a(e){return s.find(t=>t.email===e)}function d(e){let t=a(e)||c(e),i={id:C(),userId:t.id,email:e,plan:"premium",status:"active",startDate:new Date,endDate:new Date(Date.now()+2592e6),price:u.price,premiumArticlesUsed:0,premiumArticlesLimit:u.premiumArticlesLimit,freeQuizzesUsed:0,freeQuizzesLimit:u.freeQuizzesLimit,freeQuizValueCap:u.freeQuizValueCap,articleDiscountPercent:u.articleDiscountPercent,quizFreeAccess:u.quizFreeAccess,quizDiscountPercent:u.quizDiscountPercent,discountedQuizzesUsed:0,discountedQuizzesLimit:u.discountedQuizzesLimit,manualDiscounts:[],lastCycleReset:new Date};return r.push(i),t.subscription=i,i}function o(e){let t=r.find(t=>t.email===e&&"active"===t.status);return t&&function(e){var t;let i=new Date;t=e.lastCycleReset,(i.getUTCFullYear()!==t.getUTCFullYear()||i.getUTCMonth()!==t.getUTCMonth())&&(e.premiumArticlesUsed=0,e.freeQuizzesUsed=0,e.discountedQuizzesUsed=0,e.lastCycleReset=i,e.endDate<i&&(e.endDate=new Date(i.getTime()+2592e6)))}(t),t}function l(e){let t=o(e);return!!t&&t.endDate>new Date}function z(e){let t=o(e);return!!t&&t.premiumArticlesUsed<t.premiumArticlesLimit}function m(e){let t=o(e);return!!(t&&z(e))&&(t.premiumArticlesUsed+=1,!0)}function p(e,t){let i=o(e);return i?z(e)?0:Math.round(t*(1-i.articleDiscountPercent/100)*100)/100:null}function f(e,t){let i=o(e);return!!i&&(!!i.quizFreeAccess||i.freeQuizzesUsed<i.freeQuizzesLimit&&t<=i.freeQuizValueCap)}function Q(e,t){let i=o(e);return i?f(e,t)?0:i.discountedQuizzesUsed<i.discountedQuizzesLimit?Math.round(t*(1-i.quizDiscountPercent/100)*100)/100:t:null}function D(e){let t=o(e);return!!t&&t.discountedQuizzesUsed<t.discountedQuizzesLimit&&(t.discountedQuizzesUsed+=1,!0)}function U(e){let t=o(e);return!!t&&(!!t.quizFreeAccess||t.freeQuizzesUsed<t.freeQuizzesLimit&&(t.freeQuizzesUsed+=1,!0))}function A(e,t){let i=a(e)||c(e);return!i.likedArticles.includes(t)&&(i.likedArticles.push(t),!0)}function h(e,t){let i=a(e);if(!i)return!1;let r=i.likedArticles.indexOf(t);return r>-1&&(i.likedArticles.splice(r,1),!0)}function g(e,t){let i=a(e);return!!i&&i.likedArticles.includes(t)}function q(e){let t=o(e);return t?{plan:t.plan,status:t.status,premiumArticlesUsed:t.premiumArticlesUsed,premiumArticlesRemaining:t.premiumArticlesLimit-t.premiumArticlesUsed,freeQuizzesUsed:t.freeQuizzesUsed,freeQuizzesRemaining:t.freeQuizzesLimit-t.freeQuizzesUsed,freeQuizValueCap:t.freeQuizValueCap,discountedQuizzesUsed:t.discountedQuizzesUsed,discountedQuizzesRemaining:t.discountedQuizzesLimit-t.discountedQuizzesUsed,endDate:t.endDate,daysRemaining:Math.ceil((t.endDate.getTime()-Date.now())/864e5)}:null}function L(e){let t=r.find(t=>t.email===e&&"active"===t.status);return!!t&&(t.status="cancelled",t.endDate=new Date,!0)}function P(e){let t=o(e);return!!t&&(t.premiumArticlesUsed=0,t.freeQuizzesUsed=0,t.discountedQuizzesUsed=0,t.lastCycleReset=new Date,!0)}function C(){return Math.random().toString(36).substr(2,9)}function v(e,t,i){let r=n[t],s=o(e);if(s){if("quiz"===t&&(s.quizFreeAccess||s.freeQuizzesUsed<s.freeQuizzesLimit&&r<=s.freeQuizValueCap))return 0;if("quiz"===t&&s.discountedQuizzesUsed<s.discountedQuizzesLimit)return Math.round(r*(1-s.quizDiscountPercent/100)*100)/100;if("article"===t&&z(e))return 0;if("article"===t)return Math.round(r*(1-s.articleDiscountPercent/100)*100)/100}let u=a(e);if(u){let e=u.userDiscounts.filter(e=>e.itemType===t&&(!e.itemId||e.itemId===i));if(e.length>0)return e.reduce((e,t)=>t.discountedPrice<e.discountedPrice?t:e).discountedPrice}return r}}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[8948,5972],()=>i(14556));module.exports=r})();